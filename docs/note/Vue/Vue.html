<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue | 前端攻城手册</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="前端攻城狮的攻城宝典">
    
    <link rel="preload" href="/mynote/assets/css/0.styles.4607b592.css" as="style"><link rel="preload" href="/mynote/assets/js/app.7fa68d6d.js" as="script"><link rel="preload" href="/mynote/assets/js/3.50452af2.js" as="script"><link rel="preload" href="/mynote/assets/js/1.6e2e339d.js" as="script"><link rel="preload" href="/mynote/assets/js/35.f2fb6263.js" as="script"><link rel="prefetch" href="/mynote/assets/js/10.e8e79b0e.js"><link rel="prefetch" href="/mynote/assets/js/11.aedcb26b.js"><link rel="prefetch" href="/mynote/assets/js/12.bd2d41ad.js"><link rel="prefetch" href="/mynote/assets/js/13.ba06aa5a.js"><link rel="prefetch" href="/mynote/assets/js/14.8960dcba.js"><link rel="prefetch" href="/mynote/assets/js/15.6577bd04.js"><link rel="prefetch" href="/mynote/assets/js/16.a5ac289a.js"><link rel="prefetch" href="/mynote/assets/js/17.32a6e9ff.js"><link rel="prefetch" href="/mynote/assets/js/18.32535bd6.js"><link rel="prefetch" href="/mynote/assets/js/19.fcc1b0ce.js"><link rel="prefetch" href="/mynote/assets/js/20.e74f20b4.js"><link rel="prefetch" href="/mynote/assets/js/21.aa56cef1.js"><link rel="prefetch" href="/mynote/assets/js/22.907ab2eb.js"><link rel="prefetch" href="/mynote/assets/js/23.36975004.js"><link rel="prefetch" href="/mynote/assets/js/24.26908191.js"><link rel="prefetch" href="/mynote/assets/js/25.df4fb07c.js"><link rel="prefetch" href="/mynote/assets/js/26.a1a22e20.js"><link rel="prefetch" href="/mynote/assets/js/27.f6cdb781.js"><link rel="prefetch" href="/mynote/assets/js/28.fa33413c.js"><link rel="prefetch" href="/mynote/assets/js/29.61f42e66.js"><link rel="prefetch" href="/mynote/assets/js/30.88dbea18.js"><link rel="prefetch" href="/mynote/assets/js/31.f258b7aa.js"><link rel="prefetch" href="/mynote/assets/js/32.9764e859.js"><link rel="prefetch" href="/mynote/assets/js/33.fd82cfe7.js"><link rel="prefetch" href="/mynote/assets/js/34.9a302850.js"><link rel="prefetch" href="/mynote/assets/js/36.f281f45c.js"><link rel="prefetch" href="/mynote/assets/js/37.5acf7413.js"><link rel="prefetch" href="/mynote/assets/js/38.2561cc0e.js"><link rel="prefetch" href="/mynote/assets/js/39.8fcb2d5f.js"><link rel="prefetch" href="/mynote/assets/js/4.864a582c.js"><link rel="prefetch" href="/mynote/assets/js/40.e3d7f3bf.js"><link rel="prefetch" href="/mynote/assets/js/41.56d15d6b.js"><link rel="prefetch" href="/mynote/assets/js/42.1934065a.js"><link rel="prefetch" href="/mynote/assets/js/43.137ebda5.js"><link rel="prefetch" href="/mynote/assets/js/44.0a9926ca.js"><link rel="prefetch" href="/mynote/assets/js/45.642669fe.js"><link rel="prefetch" href="/mynote/assets/js/46.66b70397.js"><link rel="prefetch" href="/mynote/assets/js/47.b70409c3.js"><link rel="prefetch" href="/mynote/assets/js/48.c12d8944.js"><link rel="prefetch" href="/mynote/assets/js/49.c3cef91e.js"><link rel="prefetch" href="/mynote/assets/js/5.fddfa697.js"><link rel="prefetch" href="/mynote/assets/js/50.ab2b77dd.js"><link rel="prefetch" href="/mynote/assets/js/51.8f585a76.js"><link rel="prefetch" href="/mynote/assets/js/52.536e4178.js"><link rel="prefetch" href="/mynote/assets/js/6.2be0eba5.js"><link rel="prefetch" href="/mynote/assets/js/7.301cf754.js"><link rel="prefetch" href="/mynote/assets/js/8.325e8c11.js"><link rel="prefetch" href="/mynote/assets/js/9.8da6cccf.js">
    <link rel="stylesheet" href="/mynote/assets/css/0.styles.4607b592.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>前端攻城手册</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>前端攻城狮的攻城宝典</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><!---->
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mynote/" class="home-link router-link-active"><!----> <span class="site-name">前端攻城手册</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mynote/docs/note/CSS/CSS.html" class="nav-link"><i class="iconfont reco-tag"></i>
  知识点
</a></div><div class="nav-item"><a href="/mynote/docs/face/collect.html" class="nav-link"><i class="iconfont reco-tag"></i>
  面经
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><!----> <!----> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>42</h3> <h6 data-v-828910c6>文章</h6></div> <div data-v-828910c6><h3 data-v-828910c6>0</h3> <h6 data-v-828910c6>标签</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/mynote/docs/note/CSS/CSS.html" class="nav-link"><i class="iconfont reco-tag"></i>
  知识点
</a></div><div class="nav-item"><a href="/mynote/docs/face/collect.html" class="nav-link"><i class="iconfont reco-tag"></i>
  面经
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/mynote/docs/note/CSS/CSS.html" class="sidebar-heading clickable"><span>CSS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mynote/docs/note/HTML/HTML.html" class="sidebar-heading clickable"><span>HTML</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mynote/docs/note/JavaScript/JavaScript.html" class="sidebar-heading clickable"><span>JavaScript</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mynote/docs/note/NodeJs/Node.html" class="sidebar-heading clickable"><span>NodeJs</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mynote/docs/note/ThreeJs/ThreeJs.html" class="sidebar-heading clickable"><span>ThreeJs</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mynote/docs/note/Vue/Vue.html" aria-current="page" class="sidebar-heading clickable router-link-exact-active router-link-active open active"><span>Vue</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/mynote/docs/note/Vue/Vue.html" aria-current="page" class="active sidebar-link">Vue</a></li><li><a href="/mynote/docs/note/Vue/keep-alive.html" class="sidebar-link">Keep-alive</a></li><li><a href="/mynote/docs/note/Vue/Template&amp;compilation.html" class="sidebar-link">模板编译</a></li><li><a href="/mynote/docs/note/Vue/Fuzzy&amp;knowledge&amp;point.html" class="sidebar-link">模糊知识点</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mynote/docs/note/Computer-network/Computer-network.html" class="sidebar-heading clickable"><span>计算机网络</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mynote/docs/note/browser/browser.html" class="sidebar-heading clickable"><span>浏览器</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mynote/docs/note/engineering&amp;optimization/optimization.html" class="sidebar-heading clickable"><span>前端工程化和优化</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mynote/docs/note/writeCode/writecode.html" class="sidebar-heading clickable"><span>手撕代码</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mynote/docs/note/false/about-this.html" class="sidebar-heading clickable"><span>误区</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mynote/docs/face/all.html" class="sidebar-heading clickable"><span>面经</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Vue</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><!---->
            
          <!---->
          2022
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Vue</h1> <div data-v-1ff7123e><!----> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>2022/4/12</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><p>[TOC]</p> <p><img src="https://s2.loli.net/2022/03/26/Uqxdv4nTpHBerW9.png" alt="Vue面试题.png"></p> <h1 id="一、vue基础"><a href="#一、vue基础" class="header-anchor">#</a> 一、Vue基础</h1> <h2 id="_1-data为什么是一个函数而不是对象"><a href="#_1-data为什么是一个函数而不是对象" class="header-anchor">#</a> 1. data为什么是一个函数而不是对象？</h2> <blockquote><p>简单来说就是，因为组件是可以复用的，JS里对象是引用关系，如果组件data是一个对象，那么子组件中的data属性值会互相污染，产生副作用。</p> <p>所以一个组件的data选项必须是一个函数，因此每个实例可以维护一份返回对象的独立拷贝。new Vue的实例时不会被复用的，因此不存在以上问题。</p></blockquote> <p>Vue组件可能存在多个实例，如果使用对象形式定义data，则会导致它们共用一个data对象，那么状态改变将会影响所有组件实例，这是不合理的；</p> <p>采用函数形式定义，在initData时会将其作为工厂函数返回全新data对象，有效<strong>规避多实例之间状态污染问题</strong>。而在Vue根实例创建过程中则不存在该限制，也是因为根实例只能有一个，不需要担心这种情况。</p> <h2 id="_2-为什么vue3-0使用proxy-抛弃了object-defineproperty"><a href="#_2-为什么vue3-0使用proxy-抛弃了object-defineproperty" class="header-anchor">#</a> 2. 为什么vue3.0使用proxy，抛弃了object.defineProperty?</h2> <p><code>Object.defineProperty</code>只能劫持对象的属性，因此我们需要对每个对象的每个属性进行遍历。vue2.X里，是通过 递归+遍历 data对象来实现对数据的监控的，如果属性值也是对象那么需要深度遍历，显然如果能劫持一个完整的对象才是更好的选择。</p> <p>Proxy可以劫持整个对象，并返回一个新的对象。Proxy不仅可以代理对象，还可以代理数组。还可以代理动态增加的属性。</p> <h2 id="_3-对ssr的理解"><a href="#_3-对ssr的理解" class="header-anchor">#</a> 3. 对SSR的理解</h2> <p>SSR也就是服务端渲染，也就是将Vue在客户端把标签渲染成HTML的工作放在服务端完成，然后再把html直接返回给客户端。</p> <p><strong>SSR的优势</strong>：</p> <ul><li>更好的SEO</li> <li>首屏加载速度更快</li></ul> <p><strong>SSR的缺点</strong>：</p> <ul><li>开发条件会受到限制，服务端渲染只支持beforeCreate 个 created 两个钩子</li> <li>当需要一些外部扩展库时需要特殊处理，服务端渲染应用程序也需要处于Node.js的运行环境</li> <li>更多的服务端负载</li></ul> <h2 id="_4-vue如何监听对象或者数组某个属性的变化"><a href="#_4-vue如何监听对象或者数组某个属性的变化" class="header-anchor">#</a> 4. Vue如何监听对象或者数组某个属性的变化</h2> <p>当在项目中直接设置数组的某一项的值，或者直接设置对象的某个属性值，这个时候，你会发现页面并没有更新。这是因为 Object.defineProperty()限制，监听不到变化。</p> <p>解决方式：</p> <p><strong>this.$set（要改变的数组/对象，要改变的位置/key，要改成什么value）</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'hhh'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//改变数组</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'fsdf'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//改变对象</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>调用一下几个数组的方法</strong>：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">splice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>、 <span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">、pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">、shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">、unshift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">、sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">、reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>vue源码里缓存了array的原型链，然后重写了这几个方法，触发这几个方法的时候会observer数据，意思是使用这些方法不用再进行额外的操作，视图自动进行更新。推荐使用splice方法会比较好自定义，因为splice可以在数组的任何位置进行删除/添加操作。</p> <p><code>vm.$set</code>的实现原理是：</p> <ul><li>如果目标是数组，直接使用数组的splice方法触发响应式。</li> <li>如果目标是对象，会先判断属性是否存在、对象是否是响应式，最终如果要对属性进行响应式处理，则是通过调用defineReactive 方法进行响应式处理（defineReactive方法就是Vue在初始化对象时，给对象属性采用 Object.defineProperty动态添加getter和setter的功能所调用的方法）</li></ul> <h2 id="_5-什么是mixin"><a href="#_5-什么是mixin" class="header-anchor">#</a> 5. 什么是mixin？</h2> <ul><li>Mixin使我们能够为Vue组件编写可插拔和可重用的功能。</li> <li>如果希望在多个组件之间重用一组组件选项，例如生命周期hook、方法等，则可以将其编写为mixin，并在组件中简单的引用它。</li> <li>然后将mixin的内容合并到组件中。如果你要在mixin中定义生命周期hook，如果有冲突，那么组件首先会执行mixin里的hook，然后再执行自己的hook。</li> <li>值为对象的选项，例如 <code>methods</code>、<code>components</code>、<code>directives</code>，将被合并为同一个对象。两个对象键值冲突时，取 <strong>组件对象</strong>的键值对。</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 定义一个 mixin 对象</span>
<span class="token keyword">const</span> myMixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello from mixin!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 定义一个使用此 mixin 对象的应用</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">mixins</span><span class="token operator">:</span> <span class="token punctuation">[</span>myMixin<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#mixins-basic'</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;hello from mixin!&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_6-对vue组件化的理解"><a href="#_6-对vue组件化的理解" class="header-anchor">#</a> 6. 对vue组件化的理解</h2> <ol><li>组件是独立和可复用的代码组织单元。组件系统是Vue核心特性之一，它使开发者使用小型、独立和通常可复用的组件构建大型应用</li> <li>组件化开发能大幅提高应用开发效率、测试性、复用性等</li> <li>组件使用按分类由：页面组件、业务组件、通用组件</li> <li>vue的组件是基于配置的，我们通常编写的组件是组件配置而非组件，框架后续会生成其他构造函数，他们基于VueComponent，扩展于Vue</li> <li>Vue中常见组件化技术有：属性prop,自定义事件，插槽等，他们主要用于组件通信、扩展等</li> <li>合理的划分组件，有助于提升应用性能</li> <li>组件应该是高内聚、低耦合的</li> <li>遵循单向数据流的原则</li></ol> <h2 id="_7-vue的性能优化有哪些"><a href="#_7-vue的性能优化有哪些" class="header-anchor">#</a> 7. Vue的性能优化有哪些？</h2> <p><strong>（1）编码阶段</strong></p> <ul><li>尽量减少data中的数据，data中的数据会增加getter和setter，会收集对应的watcher</li> <li>v-if和v-for不能连用</li> <li>如果需要使用v-for给每项元素绑定事件时使用事件代理</li> <li>SPA页面采用keep-alive缓存组件</li> <li>在更多情况下，使用v-if替代v-show</li> <li>key保证唯一</li> <li>使用路由懒加载、异步组件</li> <li>防抖、节流</li> <li>第三方模块按需导入</li> <li>长列表滚动到可视区域动态加载</li> <li>图片懒加载</li></ul> <p><strong>（2）SEO</strong>优化</p> <ul><li>预渲染</li> <li>服务端渲染SSR</li></ul> <p><strong>（3）打包优化</strong></p> <ul><li>压缩代码</li> <li>Tree Shaking/Scope Hoisting</li> <li>使用cdn加载第三方模块</li> <li>多线程打包happypack</li> <li>sourceMap优化</li></ul> <p><strong>（4）用户体验</strong></p> <ul><li>骨架屏</li> <li>PWA</li> <li>还可以使用缓存（客户端缓存、服务端缓存）优化、服务单开启gzip压缩等</li></ul> <h2 id="_8-v-model的实现原理"><a href="#_8-v-model的实现原理" class="header-anchor">#</a> 8. v-model的实现原理</h2> <p>vue中 v-model 可以实现数据的双向绑定，但是为什么这个指令就可以实现数据的双向绑定呢？其实 v-model是vue的一个语法糖。即利用v-model绑定数据后，又添加了一个input事件监听。</p> <p>实现原理：</p> <ul><li>v-bind 绑定响应数据</li> <li>触发input事件并传递数据</li></ul> <p>实例：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
//等价于
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text = $event.target.value<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
//组件中使用：
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-input</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$event<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-input</span><span class="token punctuation">&gt;</span></span>
// 根据v-model原理模拟：
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ipt1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ipt2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> ipt1<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'ipt1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ipt2<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'ipt2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ipt1<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        ipt2<span class="token punctuation">.</span>value<span class="token operator">=</span>ipt1<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_9、常见的事件修饰符及其作用"><a href="#_9、常见的事件修饰符及其作用" class="header-anchor">#</a> 9、常见的事件修饰符及其作用</h2> <ul><li><code>.stop</code>：等同于JavaScript中的 <code>event.stopPropagation()</code>，防止事件冒泡；</li> <li><code>.prevent</code>：等同于JavaScript中的 <code>event.preventDefault()</code>，防止执行预设的行为（如果事件可取消，则取消该事件，而不停止事件的进一步传播）；</li> <li><code>.capture</code>：与事件冒泡的方向相反，事件捕获由外到内；</li> <li><code>.self</code>：只会触发自己范围内的事件，不包含子元素；</li> <li><code>.once</code>：只会触发一次。</li></ul> <h2 id="_10、vue单页面应用与多页面应用的区别"><a href="#_10、vue单页面应用与多页面应用的区别" class="header-anchor">#</a> 10、Vue单页面应用与多页面应用的区别</h2> <p><strong>概念</strong>：</p> <ul><li>SPA单页面应用（SinglePage Web Application），指只有一个主页面的应用，一开始只需要加载一次js，css等相关资源。所有内容都包含在主页面，对每一个功能模块组件化。单页面应用跳转，就是切换相关组件，仅仅刷新局部资源。</li> <li>MAP多页面应用（MultiPage Application），指有多个独立页面的应用，每个页面必须重复加载js、css等相关资源。多页面应用跳转需要整个页资源刷新。</li></ul> <p><img src="https://gitee.com/guoluyan53/image-bed/raw/master/img/1609521413572-54d0bd0f-8ed6-4438-997a-c890e4cd9c5e.jpeg" alt="775316ebb4c727f7c8771cc2c06e06dd.jpg"></p> <h2 id="_11、vue是如何收集依赖的"><a href="#_11、vue是如何收集依赖的" class="header-anchor">#</a> 11、Vue是如何收集依赖的？</h2> <p>在初始化Vue的每个组件时，会对组件的data进行初始化，就会将普通对象变成响应式对象，在这个过程中便会进行依赖收集的相关逻辑，如下所示：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">defineReactive</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span>val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">...</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token function">reactiveGetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>Dep<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">{</span>
                dep<span class="token punctuation">.</span><span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token operator">...</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> val
        <span class="token punctuation">}</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>以上只保留了关键代码，主要就是 <code>const dep = new Dep()</code>实例化一个Dep的实例，然后在get函数中通过 <code>dep.depend()</code>进行依赖收集。</p> <p><strong>（1）Dep</strong></p> <p>Dep是整个依赖收集的核心。Dep是一个class，其中有一个关键的静态属性static，它指向了一个全局唯一 Watcher，保证了同一时间全局只有一个watcher被计算，另一个属性subs则是一个Watcher的数组，<strong>所以Dep实际上就是对Watcher的管理</strong>。</p> <p><strong>（2）Watcher</strong></p> <p>Watcher是一个class，它定义了一些方法，其中和依赖收集相关的主要有get、addDep等。</p> <p><strong>（3）过程</strong></p> <p>在实例化Vue时，依赖收集的相关过程如下：</p> <p>初始化状态 initState，这中间便会通过 defineReactive将数据变成响应式对象，其中的getter部分便是用来收集依赖的。初始化最终会走mount过程，其中会实例化Watcher，进入Watcher中，便会执行this.get()方法。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function-variable function">updateComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    vm<span class="token punctuation">.</span><span class="token function">_update</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span><span class="token function">_render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span>updateComponent<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>get 方法中的pushTarget实际上就是把 Dep.target赋值为当前的watcher。</p> <p>this.getter.call(vm,vm)，这里的getter会执行vm._render()方法，在这个过程中便会触发数据对象的getter。那么每个对象值的getter都持有一个dep，在触发getter的时候会调用dep.depend()方法，也就会执行Dep.target.addDep(this)。刚才Dep.target已经被赋值为watcher，于是便会执行addDep方法，然后走到dep.addSub()方法，便将当前的watcher订阅到这个数据持有的dep的subs中，这个目的是为后续数据变化时候能通知到哪些subs做准备。所以在vm. _  render()过程中，会触发所有数据的getter，这样便已经完成了整个依赖收集的过程。</p> <h2 id="_12、vue的优点"><a href="#_12、vue的优点" class="header-anchor">#</a> 12、Vue的优点</h2> <ul><li><strong>轻量级框架</strong>：只关注视图层，是一个构建数据的视图集合，大小只有几十KB；</li> <li><strong>简单易学</strong>：中文文档</li> <li><strong>双向数据绑定</strong>：保留了 angular的特点，在数据操作方面更为简单；</li> <li><strong>组件化</strong>：保留了 react 的优点，实现了 HTML 的封装和重用，在构建单页面应用方面有着独特的优势。</li> <li><strong>视图、数据、结构分离</strong>：使数据的更改更为简单，不需要进行逻辑代码的修改，只需要操作数据就能完成相关操作。</li> <li><strong>虚拟DOM</strong>：dom操作是非常耗费性能的，不再使用原生的 DOM操作节点，极大解放DOM操作，但具体操作还是DOM，不过是换了另一种方式</li> <li><strong>运行速度更快</strong>：相较于 react 而言，同样是操作虚拟DOM，就性能而言，Vue存在很大的优势。</li></ul> <h2 id="_13、assets-和-static的区别"><a href="#_13、assets-和-static的区别" class="header-anchor">#</a> 13、assets 和 static的区别</h2> <p><strong>相同点</strong>：<code>assets</code> 和 <code>static</code>两个都是存放静态资源文件。项目中所需要的资源文件图片，字体图标，样式文件等都可以放在这两个文件下。</p> <p><strong>不同点</strong>：</p> <ul><li><code>assets</code>中存放的静态资源文件在项目打包时，也就是运行 <code>npm run build</code>时会将 <code>assets</code>中放置的静态资源文件进行打包上传，所谓打包简单点可以理解为压缩体积，代码格式化。而压缩后的静态资源文件最终也会放置在 <code>static</code>文件中跟着 <code>index.html</code>一同上传至服务器。</li> <li><code>static</code>中放置的静态文件就不会要走打包压缩格式化等流程，而是直接进入打包好的目录，直接上传至服务器。
<ul><li>因为避免了压缩直接进行上传，在打包时会提高一定的效率，但是 <code>static</code>中的资源文件由于没有进行压缩等操作，所以文件的体积也就相对于 <code>assets</code>中打包后的文件提交较大点。在服务器中就会占据更大的空间。</li></ul></li></ul> <p><strong>建议</strong>：将项目中 <code>template</code>需要的样式文件js文件等都可以放置在 <code>assets</code>中，走打包这一流程。减少体积。而项目中引入的第三方的资源文件如 <code>iconfont.css</code>等文件可以放置在 <code>static</code>中，因为这些引入的第三方文件已经经过处理，不再需要处理，直接上传。</p> <h2 id="_14、delete-和-vue-delete删除数组的区别"><a href="#_14、delete-和-vue-delete删除数组的区别" class="header-anchor">#</a> 14、delete 和 Vue.delete删除数组的区别</h2> <ul><li><code>delete</code>只是被删除的元素变成了 <code>empty/undefined</code>，其他的元素的键值还是不变。</li> <li><code>Vue.delete</code>直接删除了数组，改变了数组的键值。</li></ul> <h2 id="_15、extend有什么作用"><a href="#_15、extend有什么作用" class="header-anchor">#</a> 15、extend有什么作用</h2> <p>这个API很少用到，作用是扩展组件生成一个构造器，通常会与 <code>$mount</code>一起使用。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//创建组件构造器</span>
<span class="token keyword">let</span> Component <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'&lt;div&gt;test&lt;/div&gt;'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//挂载到#app上</span>
<span class="token keyword">new</span> <span class="token class-name">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
<span class="token comment">//除了上面的方式，还可以用来扩展已有的组件</span>
<span class="token keyword">let</span> SuperComponent <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>Component<span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">SuperComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">SuperComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_16、mixin-和-mixins-区别"><a href="#_16、mixin-和-mixins-区别" class="header-anchor">#</a> 16、mixin 和 mixins 区别</h2> <p><code>mixin</code>用于全局混入，会影响到每个组件实例，通常插件都是这样做初始化的。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//...逻辑</span>
        <span class="token comment">//这种方式会影响到每个组件的 beforeCreate钩子函数</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>虽然文档不建议在应用中直接使用 <code>mixin</code>，但是如果不滥用的话也是很有帮助的，比如可以全局混入封装好的 <code>ajax</code>或者一些工具函数等。</p> <p><code>mixins</code>应该是最常用的扩展组件的方式了。如果多个组件中有相同的业务逻辑，就可以将这些逻辑剥离出来，通过 <code>mixins</code>混入代码，比如上拉下拉加载数据这种逻辑等</p> <p>另外要注意的是 <code>mixins</code>混入的钩子函数会先于组件内的钩子函数执行，并且在遇到同名选项的时候也会选择性的进行合并。</p> <h2 id="_17、mvvm的优缺点"><a href="#_17、mvvm的优缺点" class="header-anchor">#</a> 17、MVVM的优缺点？</h2> <p><strong>优点</strong>：</p> <ul><li>分离视图和模型，降低代码耦合，提高视图或者逻辑的重用性。</li> <li>提高可测试性：ViewModel的存在可以帮助开发者更好地编写测试代码</li> <li>自动更新DOM：利用双向绑定，数据更新后视图自动更新，让开发者从繁琐的手动DOM中解放。</li></ul> <p><strong>缺点</strong>:</p> <ul><li>Bug很难被调试: 因为使⽤双向绑定的模式，当你看到界⾯异常了，有可能是你View的代码有Bug，也可能是Model的代码有问题。数据绑定使得⼀个位置的Bug被快速传递到别的位置，要定位原始出问题的地⽅就变得不那么容易了。另外，数据绑定的声明是指令式地写在View的模版当中的，这些内容是没办法去打断点debug的</li> <li>⼀个⼤的模块中model也会很⼤，虽然使⽤⽅便了也很容易保证了数据的⼀致性，当时⻓期持有，不释放内存就造成了花费更多的内存</li> <li>对于⼤型的图形应⽤程序，视图状态较多，ViewModel的构建和维护的成本都会⽐较⾼。</li></ul> <h1 id="二、vue原理篇"><a href="#二、vue原理篇" class="header-anchor">#</a> 二、Vue原理篇</h1> <h2 id="_1-v-if、v-show、v-html的原理"><a href="#_1-v-if、v-show、v-html的原理" class="header-anchor">#</a> 1. v-if、v-show、v-html的原理</h2> <ul><li><code>v-if</code>会调用addCondition方法，生成vnode的时候会忽略对应节点，render的时候就不会渲染；</li> <li><code>v-show</code>会生成VNode，render的时候也会渲染成真实节点，只是在render过程中会在节点的属性中修改show属性值，也就是常说的display。</li> <li><code>v-html</code>会先移除节点下的所有节点，调用html方法，通过addProp添加innerHTML属性，归根结底还是设置innerHTML为v-html的值。</li></ul> <h2 id="_2-vue的基本原理"><a href="#_2-vue的基本原理" class="header-anchor">#</a> 2. vue的基本原理</h2> <p>当一个vue实例创建时，vue会遍历data中的属性，用 <code>Object.defineProperty</code>(vue3.0使用proxy)将他们转化为 getter/setter，并且在内部追踪相关依赖，在属性被访问和修改时通知变化。每个组件实例都有相应的watcher程序实例，它会在组件渲染的过程中把属性记录为依赖，之后当依赖项的setter被调用时，会通知watcher重新计算，从而致使它关联的组件得以更新。</p> <p><img src="https://gitee.com/guoluyan53/image-bed/raw/master/img/1620128979608-f7465ffc-9411-43e3-a6bc-96ab44dd77df.png" alt="0_tB3MJCzh_cB6i3mS-1.png"></p> <h2 id="_3-双向数据绑定原理"><a href="#_3-双向数据绑定原理" class="header-anchor">#</a> 3. 双向数据绑定原理</h2> <p>vue.js是采用 <strong>数据劫持</strong>结合 <strong>发布者-订阅者模式</strong>的方式，通过 <code>Object.defineProperty()</code>来劫持各个属性的setter，getter，在数据变动时发布消息给订阅者，触发相应的监听回调。主要分为以下几个步骤：</p> <ol><li><p>需要<code>observe</code>的数据对象进行递归遍历，包括子属性对象的属性，都加上setter和getter这样的话，给这个对象的某个值赋值，就会触发setter，那么就能监听到了数据变化。</p></li> <li><p><code>compile</code>解析模板指令，将模板中的变量替换换成数据，然后初始化渲染页面视图，并将每个指令对应的节点绑定更新函数，添加监听数据的订阅者，一旦数据有变动，收到通知，更新视图。</p></li> <li><p><code>Watcher</code>订阅者是 <code>Observe</code> 和 <code>Compile</code>之间通信的桥梁，主要做的事情是：</p> <p>① 在自身实例化时往属性订阅器（dep）里面添加自己</p> <p>② 自身必须有一个update()方法</p> <p>③ 待属性变动 dep.notice()通知时，能调用自身的update()方法，并触发Compile中绑定的回调，则功成身退</p></li> <li><p>MVVM作为数据绑定的入口，整个Observer、Compile和 Watcher三者，通过 Observer来监听组件的model数据变化，通过Compile来解析编译模板指令，最终利用Watcher搭起Observer和Compile之间的通信桥梁，达到数据变化 -》视图更新；视图交互变化（input）-》数据model变更的双向绑定效果。</p></li></ol> <p><img src="https://s2.loli.net/2022/03/26/jQHGD4ZIMtgXeqU.png" alt="img"></p> <h2 id="_4-nexttick原理及作用"><a href="#_4-nexttick原理及作用" class="header-anchor">#</a> 4. $nextTick原理及作用</h2> <blockquote><p>Vue的nextTick其本质是对JavaScript执行原理EventLoop（事件循环）的一种应用。</p></blockquote> <p>​		nextTick的核心是利用了如promise、MutationObserver、setImmediate、setTimeout的原生JavaScript方法来模拟应对的微/宏任务的实现，本质是为了利用JavaScript的这些异步回调任务队列来实现Vue框架中自己的异步回调队列。</p> <p>​		<strong>nextTick不仅是vue内部的异步队列的调用方法</strong>，同时也允许开发者在实际项目中使用这个方法来满足实际应用中<strong>对DOM更新数据时机的后续处理</strong>。</p> <h3 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h3> <ol><li>vue用异步队列的方式来控制DOM更新和nextTick回调后执行。</li> <li>微任务因为以高优先级特性，能确保队列中微任务在一次事件循环前被执行完毕。</li> <li>考虑兼容问题，vue做了微任务向宏任务的降级方案。</li></ol> <h2 id="_5-vue2-x里的-object-defineproperty"><a href="#_5-vue2-x里的-object-defineproperty" class="header-anchor">#</a> 5. Vue2.x里的 object.defineProperty()</h2> <blockquote><p>在正常操作下，这个方法不可修改、不可枚举、不可删除。除非设置了true。</p> <p>defineProperty ----&gt;  定义属性，接收三个参数（要增加的对象，要增加的属性，描述对象），即</p> <p><code>Object.defineproperty(obj, prop , descriptor)</code>，默认返回的是obj。</p> <p>劫持数据---》给对象进行扩展---》属性进行设置。</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">defineProperty</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> _obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>_obj<span class="token punctuation">,</span> <span class="token string">'a'</span> <span class="token punctuation">,</span><span class="token punctuation">{</span>
        <span class="token comment">//一下都是纯的数据描述，是否可以三改</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">writable</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">//可修改</span>
        <span class="token literal-property property">enumerable</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">//可枚举</span>
        <span class="token literal-property property">configurable</span><span class="token operator">:</span><span class="token boolean">true</span>  <span class="token comment">//可删除</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="关于getter-和-setter机制"><a href="#关于getter-和-setter机制" class="header-anchor">#</a> 关于getter 和 setter机制</h3> <p>每定义一个属性的时候 getter setter 机制</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> _obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">//同时定义多个属性用es</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>_obj<span class="token punctuation">,</span><span class="token punctuation">{</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token string">'&quot;这是&quot; + a'</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span><span class="token punctuation">{</span>
                a <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'the value &quot;a&quot; 被定义为了'</span><span class="token operator">+</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//这里的a其实就是被newVal赋值了</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//调用set方法，将2的值传递给newVal，同时改变变量a的值，输出：the value &quot;a&quot; 被定义为了2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//调用get方法，获取到a的值，输出：2。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><blockquote><p>在描述 descriptor里<strong>不能</strong>同时存在 <strong>writable，enumerable，configurable 和set()、get()共存</strong></p></blockquote> <p>在上述代码中，打印<code>obj.a</code>的值输出了2，这是因为我们将 obj.a赋值为了2，调用了set方法，同时也会修改原有定义的a。故当下一次再调用get方法获取数据的时候，会去看看原有的数据有没有被修改，返回的是最新的数据。</p> <h3 id="关于数据劫持"><a href="#关于数据劫持" class="header-anchor">#</a> 关于数据劫持</h3> <p><strong>定义</strong>：数据劫持，指的是访问或者修改对象的某个属性时，通过一段代码拦截这个行为，<strong>进行额外的操作</strong>（比如加上console语句，或者输出一些长句子，向上面这样就是进行了额外的操作）或者修改返回结果。</p> <h3 id="怎样使用object-defineproperty操作数组"><a href="#怎样使用object-defineproperty操作数组" class="header-anchor">#</a> 怎样使用Object.defineProperty操作数组？</h3> <p>因为Object.defineProperty不能监听数组的变化，数组的push、pop、shift、unshift、splice、sort、reverse方法不会被触发。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">DataArr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> _val <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//object</span>
    <span class="token keyword">var</span> _arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">'val'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> _var<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	_val <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
        	_arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">val</span><span class="token operator">:</span>_val<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'A new value&quot;'</span> <span class="token operator">+</span> _val <span class="token operator">+</span> <span class="token string">'&quot; has been pushed to _arr'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getArr</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> _arr<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//使用new创建一个对象，这时this就指向创建的这个变量</span>
<span class="token keyword">var</span> dataArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataArr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dataArr<span class="token punctuation">.</span>val <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
dataArr<span class="token punctuation">.</span>val <span class="token operator">=</span> <span class="token number">234</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dataArr<span class="token punctuation">.</span><span class="token function">getArr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><img src="https://gitee.com/guoluyan53/image-bed/raw/master/img/image-20220303095147324.png" alt="image-20220303095147324"></p> <p>这里使用创建对象的形式来改变数组。</p> <h2 id="_6-vue3-0-里的proxy"><a href="#_6-vue3-0-里的proxy" class="header-anchor">#</a> 6. Vue3.0 里的Proxy</h2> <blockquote><p>Proxy是代理的意思，其实就是代理一个对象，替这个对象完成想要的功能。</p> <p>Proxy可以直接处理对象、数组、函数等引用类型的值。</p></blockquote> <p><strong>形式</strong>：<code>Proxy(target,handler)</code></p> <ul><li>target：目标对象，你要进行处理的对象</li> <li>handler 容器   无数可以处理的对象方法，自定义对象属性的获取，复制，枚举，函数调用等功能。</li></ul> <h3 id="可以直接修改对象"><a href="#可以直接修改对象" class="header-anchor">#</a> 可以直接修改对象</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token comment">//get接收两个参数，第一个是要改变的对象，第二个是对象属性</span>
    <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>prop<span class="token punctuation">)</span><span class="token punctuation">{</span> 
        <span class="token keyword">return</span> <span class="token string">'this is property value'</span> <span class="token operator">+</span> target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//set接收三个参数，第一个是要改变的对象，第二个是对象属性，第三个是要修改的值</span>
    <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>prop<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
    target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//this is property value 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//1</span>
proxy<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>       <span class="token comment">//修改b的值为3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//{a:1,b:3}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="可以直接修改数组"><a href="#可以直接修改数组" class="header-anchor">#</a> 可以直接修改数组</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'小明'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">19</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'小王'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">29</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'小化'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'小李'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">45</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> persons <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>prop<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> arr<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>prop<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
        arr<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>persons<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{name:'小化',age:13}</span>
persons<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'小转换'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>persons<span class="token punctuation">,</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//是修改后的结果，是一样的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="直接修改函数"><a href="#直接修改函数" class="header-anchor">#</a> 直接修改函数</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'i am a function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
fn<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> newFn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span>prop<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> fn<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'this is a Proxy return'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newFn<span class="token punctuation">.</span>a<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_7-模板编译原理"><a href="#_7-模板编译原理" class="header-anchor">#</a> 7. 模板编译原理</h2> <p>Vue中的模板template无法被浏览器解析并渲染，因为这不属于浏览器的标准，不是正确的HTML语法，所以需要将template转化成一个JavaScript函数，这样浏览器就可以执行这一个函数并渲染出对应的HTML元素，就可以让视图跑起来了，这一个转化过程，就称为 <strong>模板编译</strong>。模板编译又分为三个阶段，解析parse，优化optimize，生成generate，最终生成可执行函数render。</p> <ul><li><strong>解析阶段</strong>：使用大量的正则表达式对template字符串进行解析，将标签、指令、属性等转化为抽象语法树AST。</li> <li><strong>优化阶段</strong>：遍历AST，找到其中的一些静态节点并进行标记，方便在页面重渲染的时候进行diff比较时，直接跳过这一些静态节点，优化runtime的性能。</li> <li><strong>生成阶段</strong>：将最终的AST转化为render函数字符串。</li></ul> <h1 id="三、vue区别篇"><a href="#三、vue区别篇" class="header-anchor">#</a> 三、Vue区别篇</h1> <h2 id="_1-mvvm、mvc、mvp的区别"><a href="#_1-mvvm、mvc、mvp的区别" class="header-anchor">#</a> 1. MVVM、MVC、MVP的区别</h2> <blockquote><p><a href="https://www.ruanyifeng.com/blog/2015/02/mvcmvp_mvvm.html" target="_blank" rel="noopener noreferrer">阮一峰对这三个模式的解读<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>这三种都是常见的软件架构设计模式，主要通过分离关注点的方式来组织代码结构、优化开发效率。</p> <p>在开发单页面应用时，往往一个路由页面对应一个脚本文件，所有的页面逻辑都在一个脚本文件里。页面的渲染、数据的获取，对用户事件的响应所有的应用逻辑都混合在一起，这样在开发简单项目时，可能看不出什么问题，如果项目变得复杂，那么整个文件就会变得冗长、混乱，这样对项目开发和后期的项目维护是非常不利的。</p> <h3 id="mvc"><a href="#mvc" class="header-anchor">#</a> MVC</h3> <p><code>MVC</code>通过分离 <code>Model</code>、<code>View</code>、<code>Controller</code>的方式来组织代码结构。</p> <p><u>其中<code>View</code>负责页面的显示，<code>Model</code>负责存储页面的业务数据以及对应的数据操作</u>。并且 <code>View</code>和 <code>Model</code>应用了观察者模式，当 <code>Model</code>层发生改变的时候它会通知有关 <code>View</code>层更新页面。</p> <p><u><code>Controller</code>层是 <code>View</code>和 <code>Model</code>层的纽带</u>，它<strong>主要负责用户与应用的响应操作</strong>，当用户与页面产生交互的时候，<code>Controller</code>中的事件触发器就开始工作了，通过调用 <code>Model</code>层，来完成对<code>Model</code>的修改，然后 <code>Model</code>层再去通知 <code>View</code>层更新。</p> <p><img src="https://s2.loli.net/2022/03/26/o3VELaWRKkJXeIQ.png" alt="image.png"></p> <h3 id="mvvm-vue使用"><a href="#mvvm-vue使用" class="header-anchor">#</a> MVVM（Vue使用）</h3> <blockquote><p>MVVM分为 Model、View、ViewModel。</p></blockquote> <ul><li><code>Model</code>代表数据模型，数据和业务逻辑都在 <code>Model</code>层中定义</li> <li><code>View</code>代表UI视图，负责数据的展示；</li> <li><code>ViewModel</code>负责监听 <code>Model</code>中数据的改变并控制视图的更新，处理用户交互操作（业务逻辑层）</li></ul> <p>Model和View并无直接关联，而是通过ViewModel来进行联系。<strong>view和ViewModel之间有着双向数据绑定的联系。View的变动，自动反映在 ViewModel，反之亦然</strong>。</p> <p>这种模式实现了Model和View的数据的同步更新，因此开发者只需要专注于数据的维护操作即可，而不需要自己操作DOM。</p> <p><img src="https://gitee.com/guoluyan53/image-bed/raw/master/img/1603814104939-8c8ac923-735d-4476-937a-cb1f795ffe84.png" alt="image.png"></p> <h3 id="mvp"><a href="#mvp" class="header-anchor">#</a> MVP</h3> <blockquote><p>即 Model、View、Presenter。</p></blockquote> <p>MVP和MVC唯一不同的在于 Presenter和Controller。在MVC中，View层和Model层会耦合在一起，当项目逻辑变得复杂时，可能会造成代码的混乱，并且可能会对代码的复用性造成一些问题。</p> <p>MVP通过使用Presenter来实现对View层和Model层的解耦。MVC中的Controller只知道Model的接口，因此它没有办法控制View层的更新，MVP中，VIew层的接口暴露给了Presenter，因此可以在Presenter中将Model的变化和View的变化绑定在一起以此来实现View和Model的同步更新。这样就实现了View和Model层的解耦，Presenter还包括了其他的响应逻辑。</p> <p><img src="https://s2.loli.net/2022/03/26/Fjkmv8OtPqWeugy.png" alt="img"></p> <h2 id="_2-v-if-和-v-show的区别"><a href="#_2-v-if-和-v-show的区别" class="header-anchor">#</a> 2. v-if 和 v-show的区别</h2> <ul><li><strong>手段</strong>：v-if是动态的向DOM树添加或者删除DOM元素；v-show是通过设置元素的display样式属性控制显隐；</li> <li><strong>编译过程</strong>：v-if切换有一个局部编译/卸载的过程，切换过程中合适地销毁和重建内部的事件监听和子组件；v-show只是简单的基于css切换。</li> <li><strong>编译条件</strong>：v-if是惰性的，如果初始条件为假，则什么也不做；只有在条件第一次变为真时才开始局部编译；v-show是在任何条件下，无论条件是否为真，都被编译，然后被缓存，而且DOM元素保留。</li> <li><strong>性能消耗</strong>：v-if有更高的切换消耗；v-show有更高的初始渲染消耗</li> <li><strong>使用场景</strong>：v-if适合运营条件不大可能改变；v-show适合频繁切换。</li></ul> <h2 id="_3-computed和watch的区别"><a href="#_3-computed和watch的区别" class="header-anchor">#</a> 3. Computed和Watch的区别</h2> <p><strong>区别</strong>：</p> <ul><li><code>computed</code>计算属性：依赖其他属性值，并且computed的值有缓存，只有它依赖的属性值发生改变，下一次获取computed的值才会重新计算computed的值。不支持异步。</li> <li><code>watch监听器</code>：更多的是 <strong>观察</strong>的作用，<strong>无缓存性</strong>，类似于某些数据的监听回调，每当监听的数据发生变化时都会执行回调进行后续操作。</li></ul> <p><strong>使用场景</strong>：</p> <ul><li>当需要进行数值计算，并且依赖与其他数据时，应该使用 <code>computed</code>，因为可以利用computed的缓存特性，避免每次获取值时都要重新计算。</li> <li>当需要在数据变化时执行异步或开销较大的操作时，应该使用watch，使用watch选项允许执行异步操作（访问一个API），限制执行该操作的频率，并在得到最终结果前，设置中间状态。这都是计算属性无法做到的。</li></ul> <h2 id="_4-created-和-mounted-的区别"><a href="#_4-created-和-mounted-的区别" class="header-anchor">#</a> 4. created 和 mounted 的区别</h2> <ul><li><strong>created</strong>：在模板渲染成html前调用，即通常初始化某些属性值，然后再渲染成视图。</li> <li><strong>mounted</strong>：在模板渲染成html后调用，通常是初始化页面完成后，再对html的DOM节点进行一些需要的操作。</li></ul> <h2 id="_5-vue-router跳转和location-href有什么区别"><a href="#_5-vue-router跳转和location-href有什么区别" class="header-anchor">#</a> 5. Vue-router跳转和location.href有什么区别</h2> <ul><li>使用 <code>location.href=/url</code>来跳转，简单方便，但是刷新了页面；</li> <li>使用 <code>history.pushState(/url)</code>，无页面刷新，静态跳转</li> <li>引进router，然后使用 <code>router.push(/url)</code>来跳转，使用了 <code>diff</code>算法，实现了按需加载，减少了DOM的消耗。其实使用 router跳转和使用 <code>history.pushState()</code>没什么差别，因为vue-router就是用了 <code>history.pushState()</code>，尤其是在history模式下。</li></ul> <h2 id="_6-params-和-query的区别"><a href="#_6-params-和-query的区别" class="header-anchor">#</a> 6. params 和 query的区别</h2> <blockquote><p><a href="https://blog.csdn.net/mf_717714/article/details/81945218" target="_blank" rel="noopener noreferrer">Vue Router 的params和query传参的使用和区别（详尽）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><strong>用法</strong>：query要用path来引入，params要用name来引入，接收参数都是类似的，分别是 <code>this.$route.query.name</code> 和 <code>this.$route.param.name</code></p> <p><strong>url地址显示</strong>：query更加类似于ajax中get传参，params则类似于post，说的再简单一些，前者在浏览器地址栏中显示参数，后者则不显示。</p> <p><strong>注意</strong>：query刷新不会丢失query里面的数据，params刷新会丢失params里面的数据。</p> <blockquote><p><code>$router</code> : 是路由操作对象，只写对象</p> <p><code>$route</code> : 路由信息对象，只读对象</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//query传参，使用path跳转</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'second'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">queryId</span><span class="token operator">:</span><span class="token string">'20180822'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">queryName</span><span class="token operator">:</span> <span class="token string">'query'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//query传参接收</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>queryName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>queryName<span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>queryId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>queryId<span class="token punctuation">;</span>

<span class="token comment">//路由</span>
<span class="token punctuation">{</span>
<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/second'</span><span class="token punctuation">,</span>
<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'second'</span><span class="token punctuation">,</span>
<span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/view/second'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">///////////////////////////////////////////</span>
<span class="token comment">//params传参 使用name</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'second'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'20180822'</span><span class="token punctuation">,</span>
     <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'query'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//params接收参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id <span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>name <span class="token punctuation">;</span>

<span class="token comment">//路由</span>
<span class="token punctuation">{</span>
<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/second/:id/:name'</span><span class="token punctuation">,</span>
<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'second'</span><span class="token punctuation">,</span>
<span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/view/second'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="_7-vuex-和localstorage-的区别"><a href="#_7-vuex-和localstorage-的区别" class="header-anchor">#</a> 7. Vuex 和localStorage 的区别</h2> <p><strong>（1）最重要的区别</strong></p> <ul><li>Vuex存储在内存中</li> <li>localStorage 则以文件的方式存储在本地，只能存储字符串类型的数据，存储对象需要JSON的stringify和parse方法进行处理。读取内存比读取硬盘速度更快。</li></ul> <p><strong>（2）应用场景</strong></p> <ul><li>Vuex是一个专为vuejs应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证以一种可预测的方式发生变化。Vuex用于组件之间的传值。</li> <li>localStorage是本地存储，是将数据存储到浏览器的方法，一般是在跨页面传递数据时使用、</li> <li>Vuex能做到数据的响应式，localStorage不能</li></ul> <p><strong>（3）永久性</strong></p> <p>刷新页面时Vuex存储的值会丢失，localStorage不会</p> <p>注意：对于不变的数据确实可以用localStorage代替Vuex，但是当两个组件共有一个数据源（对象或数组）时，如果其中一个组件改变了该数据源，希望另一个组件响应该变化时，localStorage无法做到，原因就是区别1.</p> <h1 id="四、vue生命周期"><a href="#四、vue生命周期" class="header-anchor">#</a> 四、Vue生命周期</h1> <p><img src="https://s2.loli.net/2022/03/26/ASYtkwVzg54Pjqo.png" alt="无标题"></p> <h2 id="_1-说一下vue的生命周期"><a href="#_1-说一下vue的生命周期" class="header-anchor">#</a> 1. 说一下Vue的生命周期</h2> <p>Vue实例有一个完整的生命周期，也就是从开始创建、初始化数据、编译模板、挂载DOM -&gt; 渲染、更新 -&gt; 渲染、卸载等以系列过程，称这为vue的生命周期。</p> <blockquote><p>注：在这个过程中也会运行一些叫做<strong>生命周期钩子</strong>的函数，这给用户在不同阶段添加自己代码的机会。以下这些就是钩子函数：</p></blockquote> <ol><li><strong>beforeCreate（创建前）</strong>：数据观测和初始化事件还没开始，此时data的响应式追踪、event/watcher都还没有被设置，也就是说不能访问到data、computed、watch、methods上的方法和数据。</li> <li><strong>created（创建后）</strong>：实例创建完成，实例上配置的options包括 data、methods、computed、watch等都配置完成，但是此时渲染节点还未挂载到DOM，所以不能访问到 <code>$el</code>属性。</li> <li><strong>beforeMounted（挂载前）</strong>：在挂载开始之前被调用，相关的render函数首次被调用。实例已完成以下的配置：编译模板、把data里面的数据和模板生成HTML。此时还没有挂载到页面上。</li> <li><strong>mounted（挂载后）</strong>：在el 被新创建的 vm.$el替换，并挂载到实例上去之后调用。实例已经完成以下的配置：用上面编译好的HTML内容替换el属性指向的DOM对象。完成模板中的html渲染到html页面中。此过程中进行ajax交互。</li> <li><strong>beforeUpdate（更新前）</strong>：响应式数据更新时调用，此时虽然响应式数据更新了，但是对应的真实DOM还没有被渲染。</li> <li><strong>updated（更新后）</strong>：由于数据更改导致的虚拟DOM重新渲染和打补丁之后调用。此时DOM已经根据响应式数据的变化更新了。调用时，组件DOM已经更新，所以可以执行依赖于DOM的操作。然而在大多数情况下，应该避免在此期间更改状态，因为这可能会导致更新无限循环。该钩子函数在服务器端渲染期间不被调用。</li> <li><strong>beforeDestroy（销毁前）</strong>：实例销毁之前调用。这一步，实例仍然完全可以使用， <code>this</code>仍能获取到实例。</li> <li><strong>destroy（销毁后）</strong>：实例销毁后调用，调用后，Vue实例指示的所有东西都会解绑定，所有的事件监听都会被移除，所有的子实例也会被销毁。该钩子函数在服务端渲染期间不被调用。</li></ol> <h2 id="_2-vue子组件和父组件执行顺序"><a href="#_2-vue子组件和父组件执行顺序" class="header-anchor">#</a> 2. Vue子组件和父组件执行顺序</h2> <p><strong>加载渲染过程</strong>：</p> <ol><li>父组件 beforeCreate</li> <li>父组件 created</li> <li>父组件 beforeMount</li> <li>子组件 beforeCreate</li> <li>子组件 created</li> <li>子组件 beforeMount</li> <li>子组件 mounted</li> <li>父组件 mounted</li></ol> <p><strong>更新过程</strong>：</p> <ol><li>父组件 beforeUpdate</li> <li>子组件 beforeUpdate</li> <li>子组件 updated</li> <li>父组件 updated</li></ol> <p><strong>销毁过程</strong>：</p> <ul><li>父组件 beforeDestroy</li> <li>子组件 beforeDestroy</li> <li>子组件 destroyed</li> <li>父组件 destroyed</li></ul> <h2 id="_3-一般在哪个生命周期请求异步数据"><a href="#_3-一般在哪个生命周期请求异步数据" class="header-anchor">#</a> 3. 一般在哪个生命周期请求异步数据</h2> <p>我们可以在钩子函数 created、beforeMounted、Mounted中进行调用，因为在这三个钩子函数中，data已经创建，可以将服务端返回的数据进行赋值。</p> <p>推荐在created钩子函数中调用异步请求，因为在created钩子函数中调用异步请求有以下优点：</p> <ul><li>能更快获取到服务端的数据，减少页面加载时间，用户体验更好。</li> <li>SSR不支持 beforeMounted、mounted钩子函数，放在created中有助于一致性。</li></ul> <h2 id="_4-keep-alive中的生命周期有哪些"><a href="#_4-keep-alive中的生命周期有哪些" class="header-anchor">#</a> 4. keep-alive中的生命周期有哪些</h2> <blockquote><p>如果需要在组件切换的时候，保存一些组件的状态防止多次渲染，就可以使用keep-alive组件包裹需要保存的组件。</p></blockquote> <p><strong>keep-alive</strong>是Vue提供的一个内置组件，用来对组件进行缓存------在组件切换过程中将状态保留在内存中，防止重复污染DOM。</p> <p>如果一个组件包裹了keep-alive，那么它会多出两个生命周期：deactivated、activated。同时，beforeDestroy 和 destroy就不会再被触发了，因为组件不会被真正的销毁。</p> <p>当组件被换掉时，会被缓存到内存中，触发deactivated 生命周期；当组件被切换回来时，再去缓存里找这个组件、触发activated钩子函数。</p> <h1 id="五、组件通信"><a href="#五、组件通信" class="header-anchor">#</a> 五、组件通信</h1> <h2 id="_1-props-emit"><a href="#_1-props-emit" class="header-anchor">#</a> 1. props / $emit</h2> <p>父组件通过 <code>props</code> 向子组件传递数据，子组件通过 <code>$emit</code>和父组件通信。</p> <p><strong>（1）父组件向子组件传值</strong></p> <ul><li><code>props</code>只能是父组件向子组件传值，<code>props</code>使得父子组件之间形成了一个单向下行绑定。子组件的数据会随着父组件不断更新。</li> <li>props可以接收多个数据，可以是任意类型的数据。</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//父组件</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;father&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>son <span class="token operator">:</span>msg<span class="token operator">=</span><span class="token string">&quot;msgData&quot;</span> <span class="token operator">:</span>fn<span class="token operator">=</span><span class="token string">&quot;myFunction&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>son<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> son <span class="token keyword">from</span> <span class="token string">&quot;./son.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> father<span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">msgData</span><span class="token operator">:</span> <span class="token string">&quot;父组件数据&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        son
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 子组件</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;son&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;fn&quot;</span><span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;son&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fn&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>（2）子组件向父组件传值</strong></p> <p><code>$emit</code>绑定一个自定义事件，当这个事件被执行的时候就会将参数传递给父组件，而父组件通过 <code>v-on</code>监听并接收参数。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 父组件</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;section&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>com<span class="token operator">-</span>article <span class="token operator">:</span>articles<span class="token operator">=</span><span class="token string">&quot;articleList&quot;</span> @onEmitIndex<span class="token operator">=</span><span class="token string">&quot;onEmitIndex&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>com<span class="token operator">-</span>article<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>currentIndex<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> comArticle <span class="token keyword">from</span> <span class="token string">'./test/article.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'comArticle'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> comArticle <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">currentIndex</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token literal-property property">articleList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'红楼梦'</span><span class="token punctuation">,</span> <span class="token string">'西游记'</span><span class="token punctuation">,</span> <span class="token string">'三国演义'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">onEmitIndex</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">=</span> idx
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//子组件</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(item, index) in articles&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;emitIndex(index)&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'articles'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">emitIndex</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'onEmitIndex'</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token comment">// 触发父组件的方法，并传递参数index</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_2-eventbus事件总线-emit-on"><a href="#_2-eventbus事件总线-emit-on" class="header-anchor">#</a> 2. eventBus事件总线（$emit/$on）</h2> <p><code>eventBus</code>事件总线适用于 <strong>父子组件、非父子组件</strong>等之间的通信。使用步骤如下：</p> <p><strong>（1）创建 事件中心 管理 组件之间的通信</strong>：这是一个js文件</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// event-bus.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> EventBus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>（2）发送事件</strong></p> <p>假设有两个兄弟组件 <code>firstCom</code> 和 <code>secondCom</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>first<span class="token operator">-</span>com<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>first<span class="token operator">-</span>com<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>second<span class="token operator">-</span>com<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>second<span class="token operator">-</span>com<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> firstCom <span class="token keyword">from</span> <span class="token string">'./firstCom.vue'</span>
<span class="token keyword">import</span> secondCom <span class="token keyword">from</span> <span class="token string">'./secondCom.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> firstCom<span class="token punctuation">,</span> secondCom <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>在 <code>firstCom</code>组件中发送事件：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;add&quot;</span><span class="token operator">&gt;</span>加法<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>    
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>EventBus<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./event-bus.js'</span> <span class="token comment">// 引入事件中心</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">{</span>
      <span class="token literal-property property">num</span><span class="token operator">:</span><span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      EventBus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'addition'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">num</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token operator">++</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><strong>（3）接收事件</strong></p> <p>在 <code>secondCom</code>组件中接收事件：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>求和<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> EventBus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./event-bus.js'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    EventBus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'addition'</span><span class="token punctuation">,</span> <span class="token parameter">param</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">+</span> param<span class="token punctuation">.</span>num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>在上述代码中，这就相当于将 <code>num</code>值存储在了事件总线中，在其他组件中可以直接访问。事件总线就相当于一个桥梁，不用组件通过它来通信。</p> <p>虽然看起来比较简单，但是这种方法也有不便之处，如果项目过大，使用这种方式进行通信，后期维护起来会很困难。</p> <h2 id="_3-注入依赖-provide-inject"><a href="#_3-注入依赖-provide-inject" class="header-anchor">#</a> 3. 注入依赖（provide/inject）</h2> <p>这种方式就是Vue中的 <strong>注入依赖</strong>，该方法用于 <strong>父子组件之间的通信</strong>。这里父子也可以是祖孙组件，在层数很深的请况下，可以使用这种方法来进行传值。就不用一层一层的传递了。</p> <p><code>provide / inject</code>是Vue提供的两个钩子，和 <code>data</code>、<code>methods</code>是同级的。<strong>并且 <code>provide</code>的书写形式和 <code>data</code>一样。</strong></p> <ul><li><code>provide</code>钩子用来发送数据或方法</li> <li><code>inject</code>钩子用来接收数据或方法</li></ul> <p>在父组件中：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">provide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">{</span>
        <span class="token literal-property property">num</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>num
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在子组件中：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">inject</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'num'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>还可以这样写，这样就可以访问父组件中的所有属性：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">provide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'app'</span><span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>num<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p>注：依赖注入所提供的属性是 <strong>非响应式</strong>的。</p></blockquote> <h2 id="_4-ref-refs"><a href="#_4-ref-refs" class="header-anchor">#</a> 4. ref / $refs</h2> <p>这也是实现 <strong>父子组件</strong> 之间的通信。</p> <p><code>ref</code>：这个属性用在子组件上，它的引用就指向了子组件的实例。可以<strong>通过实例来访问组件的数据和方法</strong>。</p> <p>在子组件中：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'javascript'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>在父组件中：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>child ref<span class="token operator">=</span><span class="token string">&quot;child&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>component<span class="token operator">-</span>a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> child <span class="token keyword">from</span> <span class="token string">'./child.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>child<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$ref<span class="token punctuation">.</span>child<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//javascript</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>child<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//hello</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_5-parent-children"><a href="#_5-parent-children" class="header-anchor">#</a> 5. $parent / $children</h2> <ul><li>使用 <code>$parent</code>可以让组件访问父组件的实例（访问的是上一级父组件的属性和方法）</li> <li>使用 <code>$children</code>可以让组件访问子组件的实例。但是， <code>$children</code>并不能保证顺序，并且访问的数据也<strong>不是响应式的</strong>。</li></ul> <p>在子组件中：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>获取父组件的值为<span class="token operator">:</span>  <span class="token punctuation">{</span><span class="token punctuation">{</span>parentVal<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'Vue'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">parentVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span>msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>在父组件中：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 父组件中</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;hello_world&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>child<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>child<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;change&quot;</span><span class="token operator">&gt;</span>点击改变子组件值<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> child <span class="token keyword">from</span> <span class="token string">'./child.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> child <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'Welcome'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 获取到子组件</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">'JavaScript'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>在上面代码中，子组件获取到了父组件的 <code>msg</code>值，父子间改变了子组件的 <code>message</code>的值</p> <p><strong>需要注意</strong>：</p> <ul><li>通过 <code>$parent</code>访问到的是上一级父组件的实例，可以使用 <code>$root</code>来访问根组件的实例</li> <li>在组件中使用 <code>$children</code>拿到的是所有的子组件的实例，它是一个数组，并且是无序的</li> <li>在根组件 <code>#app</code>上拿 <code>$parent</code>得到的是 <code>new Vue()</code>的实例，在实例上再拿 <code>$parent</code>得到的是 <code>undefined</code>，而在最底层的子组件那 <code>$children</code>是个空数组</li> <li>$children 的值是数组，而 $parent是个对象。</li></ul> <h2 id="_6-attrs-listeners"><a href="#_6-attrs-listeners" class="header-anchor">#</a> 6. $attrs / $listeners</h2> <p>用于爷孙之间这种隔代传递数据的场景。</p> <ul><li><code>$attrs</code>：继承所有的父组件属性（除了prop传递的属性、class和style），一般用在子组件的子元素上。</li> <li><code>$listeners</code>：该属性是一个对象，里面包含了作用在这个组件上的所有监听器，可以配合 <code>v-on=$listeners</code>将所有的事件监听器指向这个组件的某个特定的子元素（相当于子组件内继承父组件的事件）</li></ul> <p>假设有 A-&gt;B-&gt;C (父子孙)</p> <p>A组件（APP.vue）</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
        <span class="token comment">//此处监听了两个事件，可以在B组件或者C组件中直接触发 </span>
        <span class="token operator">&lt;</span>child1 <span class="token operator">:</span>p<span class="token operator">-</span>child1<span class="token operator">=</span><span class="token string">&quot;child1&quot;</span> <span class="token operator">:</span>p<span class="token operator">-</span>child2<span class="token operator">=</span><span class="token string">&quot;child2&quot;</span> @test1<span class="token operator">=</span><span class="token string">&quot;onTest1&quot;</span> @test2<span class="token operator">=</span><span class="token string">&quot;onTest2&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>child1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> Child1 <span class="token keyword">from</span> <span class="token string">'./Child1.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> Child1 <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">onTest1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test1 running'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">onTest2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test2 running'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>B组件（Child1.vue）</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;child-1&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>props<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>pChild1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>$attrs<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>$attrs<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>child2 v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">&quot;$attrs&quot;</span> v<span class="token operator">-</span>on<span class="token operator">=</span><span class="token string">&quot;$listeners&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>child2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> Child2 <span class="token keyword">from</span> <span class="token string">'./Child2.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'pChild1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> Child2 <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">inheritAttrs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'test1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 触发APP.vue中的test1方法</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>C组件（child2.vue）</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;child-2&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>props<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>pChild2<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>$attrs<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>$attrs<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'pChild2'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">inheritAttrs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'test2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 触发APP.vue中的test2方法</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>在上述代码中：</p> <ul><li>C组件中能直接出发test的原因在于B组件调用C组件时 使用v-on 绑定了 <code>$listeners</code>属性。</li> <li>在B组件中通过 v-bind 绑定 <code>$attrs</code>属性，C组件可以直接获取到A组件中传递下来的prop（除了B组件中props声明的）</li></ul> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p><strong>（1）父子组件之间的通信</strong></p> <ul><li>子组件通过props属性来接收父组件的数据，然后（在父组件中）父组件在子组件上注册监听事件，子组件通过$emit触发事件来向父组件发送数据。</li> <li>通过ref属性给子组件设置一个名字。父组件通过<code>$refs.组件名</code>来获取子组件，子组件通过 <code>$parent</code>获得父组件，这样也可以实现通信。</li> <li>使用 <code>provide/inject</code>，在父组件中通过provide提供变量，在子组件中通过 inject俩将变量注入到组件中，不论子组件有多深，只要调用了inject那么就可以注入provide中的数据。</li></ul> <p><strong>（2）兄弟组件间通信</strong></p> <ul><li>使用eventBus的方法，它的本质是通过创建一个空的Vue实例来作为消息传递的对象，通过的组件引入这个实例，通信的组件通过在这个实例上监听和触发事件，来实现消息的传递。</li> <li>通过 $parent|$ref来获取到兄弟组件，也可以进行通信。</li></ul> <p><strong>（3）任意组件之间</strong></p> <ul><li>使用eventBus，其实就是创建一个事件中心，相当于中转站，可以用它来传递事件和接收事件。</li></ul> <blockquote><p>如果业务逻辑复杂，很多组件之间需要同时处理一些公共的数据，这个时候采用上面这些方法可能不利于项目的维护。这个时候可以使用vuex，vuex的思想就是将一些公共数据抽离出来，将它作为全局的变量来管理，然后其他组件就可以对这个公共数据进行读写操作，这样就达到了解耦的目的。</p></blockquote> <h1 id="六、路由"><a href="#六、路由" class="header-anchor">#</a> 六、路由</h1> <h2 id="_1-vue-router的懒加载如何实现"><a href="#_1-vue-router的懒加载如何实现" class="header-anchor">#</a> 1. Vue-Router的懒加载如何实现</h2> <blockquote><p>所谓的懒加载实际上就是按需加载，当我们需要的时候才给他加载出来。在页面上使用很多import属于非懒加载。</p></blockquote> <p>非懒加载：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> List <span class="token keyword">from</span> <span class="token string">'@/components/list.vue'</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/list'</span><span class="token punctuation">,</span><span class="token literal-property property">component</span><span class="token operator">:</span>List<span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>（1）方案①（常用）：使用箭头函数 + import动态加载</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">List</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/list.vue'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token punctuation">{</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/list'</span><span class="token punctuation">,</span><span class="token literal-property property">component</span><span class="token operator">:</span>List<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>（2）方案②：使用箭头函数 + require动态加载</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token operator">-</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/list'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'@/components/list'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>resolve<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>（3）方案③ ：使用webpack的require.ensure技术，也可以实现按需加载。在这种情况下，多个路由指定相同的chunkName，会合并打包成一个js文件</strong>。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//r就是resolve</span>
<span class="token keyword">const</span> <span class="token function-variable function">List</span> <span class="token operator">=</span> <span class="token parameter">r</span> <span class="token operator">=&gt;</span> require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">r</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@/components/list'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//路由也是正常的写法 这种方法是官方推荐写的 按模块划分懒加载</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
    	<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/list'</span><span class="token punctuation">,</span>
    	<span class="token literal-property property">component</span><span class="token operator">:</span>List<span class="token punctuation">,</span>
    	<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'list'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_2-路由的hash-和-history模式的区别"><a href="#_2-路由的hash-和-history模式的区别" class="header-anchor">#</a> 2. 路由的hash 和 history模式的区别</h2> <blockquote><p>Vue-router 有两种模式：hash模式 和 history模式。默认的路由模式是hash模式。</p></blockquote> <p><strong>（1）hash模式</strong></p> <p><strong>简介</strong>：hash模式是开发中的默认的模式，它的url带一个# ，如：http://www.abc.com/#/vue，它的hash值就是 <code>#/vue</code></p> <p><strong>特点</strong>：hash值会出现在URL里面，但是不会出现在HTTP请求中，对后端完全没有影响。所以改变hash值，不会重新加载页面。这种模式的浏览器支持度很好，低版本的IE浏览器也支持这种模式。hash路由被称为是 <strong>前端路由</strong>，已经成为SPA（单页面应用）的标配。</p> <p><strong>原理</strong>：<code>onhashchange()</code>事件：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onhashchange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>oldURL<span class="token punctuation">,</span>event<span class="token punctuation">.</span>newURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> hash <span class="token operator">=</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>使用onhashchange()事件的好处就是，在页面的hash值发生变化时，无需向后端发起请求，window就可以监听事件的改变，并按照规则加载相应的代码。除此之外，hash值变化对应的url都会被浏览器记录下来，这样浏览器就能实现页面的前进和后退。虽然是没有请求后端服务器，但是页面和hash值和对应的url关联起来了。</p> <p><strong>（2）history模式</strong></p> <p><strong>简介</strong>：history模式中的url没有 #，它使用的是传统的路由分发模式，即用户在输入一个URL时，服务器会接收这个请求，并解析这个URL，然后做出相应的逻辑处理。</p> <p><strong>特点</strong>：URL长这样：http://www.abc.com/vue/id。相比hash模式更好看。但是，history模式需要后台配置支持。如果后台没有正确配置，访问时会返回404.</p> <p><strong>API</strong>：history api可以分为两大部分，切换历史状态和修改历史状态。</p> <ul><li><strong>修改历史状态</strong>：包括了html5 history interface 中新增的 <code>pushState()</code>和 <code>replaceState()</code>方法，这两个方法应用于浏览器的历史记录栈，提供了对历史记录进行修改的功能。只是当他们进行修改时，虽然修改了URL，但浏览器不会立即向后端发送请求。如果要做到改变url但又不刷新页面的效果，就需要前端用上这两个API。</li> <li><strong>切换历史状态</strong>：包括 <code>forward()</code>、<code>back()</code>、<code>go()</code>，对浏览器进行前进、后退、跳转操作。</li></ul> <p>如果要切换到history模式，就要进行以下配置（后端也要进行配置）：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token string">'history'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>（3）两种模式的对比</strong></p> <p>调用 <code>history.pushState()</code>相比于直接修改 hash，存在以下优势：</p> <ul><li>pushState() 设置的新URL可以是与当前url<strong>同源的</strong>任意URL；而hash只可修改#后面的部分，因此只能设置与当前URL同文档的URL；</li> <li>pushState()设置的新url可以与当前url<strong>一模一样</strong>，这样也会把记录添加到栈中；而hash设置的新值必须和原来的不一样才会触发动作将记录添加到栈中。</li> <li>pushState()通过stateObject参数可以<strong>添加任意类型的数据</strong>到记录中；而hash只可添加短字符串；</li> <li>pushstate()可额外设置title属性供后续使用。</li> <li>hash模式下，仅hash符号之前的url会被包含在请求中，后端如果没有做到对路由的全覆盖，也不会返回404错误；history模式下，前端的url必须和实际向后端发起请求的url一致，如果没有对应的路由处理，将返回404错误。</li></ul> <blockquote><p>无论使用哪种模式，本质都是使用的 <code>history.pushState</code>，每次pushState后，会在浏览器的浏览记录中添加一个新的记录，但是并 <strong>不会触发页面刷新，也不会请求新的数据</strong>。</p></blockquote> <h2 id="_3-如何获取页面的hash变化"><a href="#_3-如何获取页面的hash变化" class="header-anchor">#</a> 3. 如何获取页面的hash变化</h2> <p><strong>（1）监听$route的变化</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//监听，当路由发生变化的时候执行</span>
<span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">$route</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function-variable function">handler</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span>oldVal</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//深度观察监听</span>
        <span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>（2）window.location.hash读取#值</strong></p> <p>window.location.hash 的值可读可写，读取来判断状态是否改变，写入时可以在不重载网页的前提下，添加一条历史记录。</p> <h2 id="_4-route-和-router-的区别"><a href="#_4-route-和-router-的区别" class="header-anchor">#</a> 4. $route 和 $router 的区别</h2> <ul><li><code>$route</code>是“路由信息对象”，包括 path 、params、hash、query、fullPath、matched、name等路由信息参数。</li> <li><code>$router</code>是“路由实例”对象，包括了路由的跳转方法，钩子函数等。</li></ul> <h2 id="_5-如何定义动态路由-如何获取传过来的动态参数"><a href="#_5-如何定义动态路由-如何获取传过来的动态参数" class="header-anchor">#</a> 5. 如何定义动态路由？如何获取传过来的动态参数？</h2> <p><strong>（1）param方式</strong></p> <ul><li>配置路由格式 ：<code>/router/:id</code></li> <li>传递的方式：在path后面跟上对应的值</li> <li>传递后形成的路径：<code>/router/123</code></li></ul> <ol><li>路由定义</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token comment">//在APP.vue中 方式一</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;'/user/'+userId&quot;</span> replace<span class="token operator">&gt;</span>用户<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
 
<span class="token comment">//在index.js中  方式二</span>
<span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/user/:userid'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span>User
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="2"><li>路由跳转</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 方法1：</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;{ name: 'users', params: { uname: wade }}&quot;</span><span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link

<span class="token comment">// 方法2：</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'users'</span><span class="token punctuation">,</span><span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">uname</span><span class="token operator">:</span>wade<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 方法3：</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/user/'</span> <span class="token operator">+</span> wade<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="3"><li>参数获取</li></ol> <p>通过 <code>$route.params.userid</code>获取传递的值。</p> <p><strong>（2）query方式</strong></p> <ul><li>配置路由格式： <code>/router</code>，也就是普通配置</li> <li>传递的方式：对象中使用 query 的 key 作为传递方式</li> <li>传递后形成的路径：<code>/route?id=123</code></li></ul> <p>1）路由定义</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//方式1：直接在router-link 标签上以对象的形式</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;{path:'/profile',query:{name:'why',age:28,height:188}}&quot;</span><span class="token operator">&gt;</span>档案<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>

<span class="token comment">// 方式2：写成按钮以点击事件形式</span>
<span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">'profileClick'</span><span class="token operator">&gt;</span>我的<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>    

<span class="token function">profileClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/profile&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;kobi&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token string">&quot;28&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">198</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>2）跳转方法</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 方法1：</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;{ name: 'users', query: { uname: james }}&quot;</span><span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>

<span class="token comment">// 方法2：</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> <span class="token literal-property property">query</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token literal-property property">uname</span><span class="token operator">:</span>james <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 方法3：</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;{ path: '/user', query: { uname:james }}&quot;</span><span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>

<span class="token comment">// 方法4：</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token literal-property property">query</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token literal-property property">uname</span><span class="token operator">:</span>james <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 方法5：</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/user?uname='</span> <span class="token operator">+</span> jsmes<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>3）获取参数</p> <p>通过 $route.query 获取传递的值</p> <h2 id="_6-vue-router-导航守卫"><a href="#_6-vue-router-导航守卫" class="header-anchor">#</a> 6. Vue-router 导航守卫</h2> <p><a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html" target="_blank" rel="noopener noreferrer">详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>全局前置/钩子：beforeEach、beforeResolve、afterEach</li> <li>路由独享的守卫：beforeEnter</li> <li>组件内的守卫：beforeRouteEnter、beforeRouteUpdate、beforeRouteLeave</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">vueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span>from<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>to：即将要进入的目标</li> <li>from：当前导航正要离开的路由</li></ul> <h2 id="_7-对前端路由的理解"><a href="#_7-对前端路由的理解" class="header-anchor">#</a> 7. 对前端路由的理解</h2> <blockquote><p>理解链接：</p> <ul><li><a href="https://zhuanlan.zhihu.com/p/61694291#:~:text=%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%EF%BC%8C%E9%A1%BE%E5%90%8D%E6%80%9D%E4%B9%89%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AA%20%E5%89%8D%E7%AB%AF%E4%B8%8D%E5%90%8C%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%99%A8%2C%E5%8F%AF%E4%BB%A5%E4%B8%8D%E5%90%91%E5%90%8E%E5%8F%B0%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82%E8%80%8C%E7%9B%B4%E6%8E%A5%E9%80%9A%E8%BF%87%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E5%AE%9E%E7%8E%B0%E5%A4%9A%E4%B8%AA%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%95%88%E6%9E%9C%E3%80%82%20angularjs%E4%B8%AD%E7%9A%84,ui-router%2Cvue%E4%B8%AD%E7%9A%84%20vue-router%2C%E4%BB%A5%E5%8F%8Areact%E7%9A%84%20react-router%20%E5%9D%87%E6%98%AF%E5%AF%B9%E8%BF%99%E7%A7%8D%E5%8A%9F%E8%83%BD%E7%9A%84%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0%E3%80%82" target="_blank" rel="noopener noreferrer">知乎<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>   |   <a href="https://www.jianshu.com/p/d2aa8fb951e4" target="_blank" rel="noopener noreferrer">简书<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></blockquote> <p>在前端技术早期，一个url对应一个页面，如果要从A页面切换到B页面，那么必然伴随着页面的刷新。这个体验不好（也就是说只有在用户刷新页面的情况下，才可以重新去请求数据）</p> <p>后来ajax出现了，它允许人们在不刷新页面的情况下发起请求；与之共生的，还有“不刷新页面即可更新页面内容”这种需求。在这样的背景下，出现了<strong>SPA（单页面应用）</strong>。</p> <p>SPA极大地提升了用户体验，它允许页面在不刷新的情况下更新页面内容，使页面内容切换更加流畅。但是在SPA诞生之初，人们并没有考虑到“定位”这个问题-------在内容切换前后，页面的URL都是一样的，这就带来了两个问题：</p> <ul><li>SPA其实不知道当前页面“进展到了哪一步”。可能在下一个站点下经过了反复的“前进”才终于唤出了某一块内容，但是此时只要刷新一下页面，一切就会被清零，必须重复之前的操作、才可以重新对内容进行定位-------SPA并不会“记住”你的操作</li> <li>由于有且仅有一个URL给页面做映射，这对SEO也不太友好，搜索引擎无法收集全面的信息</li></ul> <p>为了解决这个问题，前端路由出现了。</p> <p><strong>前端路由可以帮助我们在仅有一个页面的情况下，“记住”用户当前走到了哪一步------为SPA中的各个视图匹配一个唯一标识</strong>。这意味着用户前进、后退触发的新内容，都会映射到不同的URL上去。此时即便他刷新页面，因为当前的URL可以标识出它所在的位置，因此内容也不会丢失。</p> <p>前端路由可以提供这样的解决思路：</p> <ul><li>拦截用户的刷新操作，避免服务端盲目响应、返回不符合预期的资源内容。把刷新这个动作完全放到前端逻辑里消化掉。</li> <li>感知URL的变化。这里不是说要改造URL、凭空制造出N个URL来，而是说URL还是那个URL，只不过我们可以给它做一些微小的处理------这些处理并不会影响URL本身的性质，不会影响服务器对它的识别，只有我们前端感知得到。一旦我们感知到了，就会根据这些变化、用JS去给他生成不同的内容。</li></ul> <p><strong>前端路由的实现</strong>：使用hash模式和history模式</p> <h1 id="七、vuex"><a href="#七、vuex" class="header-anchor">#</a> 七、Vuex</h1> <h2 id="_1-vuex的原理"><a href="#_1-vuex的原理" class="header-anchor">#</a> 1. vuex的原理</h2> <p><a href="https://sandystar.xyz/2020/10/04/vue/Vuex%E6%A6%82%E5%BF%B5%E5%8F%8A%E4%BD%9C%E7%94%A8%E8%A7%A3%E9%87%8A/" target="_blank" rel="noopener noreferrer">我的博客解释<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://vuex.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">官网解释<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>vuex是一个专为vue.js应用程序开发的状态管理模式。，每一个VueX应用的核心就是store（仓库）。“store”基本上就是一个容器，它包含着你的应用中大部分的状态（state）</p> <ul><li>vuex的状态存储是响应式的。当vue组件从store中读取状态的时候，若store中的状态发生变化，那么相应的组件也会相应地得到高效更新。</li> <li>改变store中的状态的唯一途径就是<strong>显示地提交（commit）mutation</strong>。这样就可以方便地跟踪每一个状态的变化。</li></ul> <p><img src="https://gitee.com/guoluyan53/image-bed/raw/master/img/1609522434579-ff590978-32e1-4cf5-bbbd-d8caf932f8d6.jpeg" alt="b025e120ca3d0bd2ded3d038d58cacf4.jpg"></p> <p><strong>Vuex为Vue Components建立起了一个完整的生态圈，包括开发中的API调用一环</strong>。</p> <p><strong>（1）核心流程中的主要功能</strong>：</p> <ul><li>Vue Components 是Vue组件，组件会触发（dispatch）一些事件或动作，也就是图中的Actions。</li> <li>在组件中发出的动作，肯定是想获取或者改变数据的，但是在vuex中，数据是集中管理的，不能直接去更改数据，所以会把这个动作提交（Commit）到Mutations中；</li> <li>然后Mutations就去改变（Mutate）State 中的数据</li> <li>当State 中的数据被改变之后，就会重新渲染（render)到Vue Components中去，组件展示更新后的数据，完成一个流程。</li></ul> <p><strong>（2）各模块在核心流程中的主要功能</strong>：</p> <ul><li><code>Vue Components</code>：Vue组件。HTML页面上，负责接收用户操作等交互行为，执行dispatch方法触发对应action进行回应。</li> <li><code>dispatch</code>：操作行为触发方法，是唯一能执行action的方法。（调度、派遣、分配、触发）</li> <li><code>actions</code>：操作行为处理模块。负责处理Vue Components接收到的所有交互行为。包括 <strong>同步/异步</strong>操作，支持多个同名方法，按照注册的顺序依次触发。向后台API请求的操作就在这个模块中进行，包括触发其他action 以及 mutation 的操作。该模块提供了Promise的封装，以支持action 的链式触发。</li> <li><code>commit</code>：改变状态提交操作方法。对mutation进行提交，是唯一能执行mutation的方法。</li> <li><code>mutations</code>：状态改变操作方法。是Vuex修改state的唯一推荐方法，其他修改方式在严格模式下将会报错。该方法<strong>只能进行同步操作</strong>，且方法名只能全局唯一。操作之中会有一些hook暴露出来，以进行state的监控等。（突变）</li> <li><code>state</code>：页面状态管理容器对象。集中存储Vuecomponents中data对象的零散数据，全局唯一，以进行统一的状态管理。页面显示所需的数据从该对象中进行读取，利用Vue的细粒度数据响应机制来进行高效的状态更新。</li> <li><code>getters</code>：state对象读取方法。图中没有单独列出该模块，应该被包含在了render中，VueComponents 通过该方法读取全局state对象。（相当于计算属性）</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token comment">//1.安装插件</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>
<span class="token comment">//2. 创建对象，里面会放一下固定的对象</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span>   <span class="token comment">//基本数据</span>
        <span class="token literal-property property">counter</span><span class="token operator">:</span><span class="token number">1000</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>  
    <span class="token comment">//提交更改数据的方法，同步</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//像一个装饰器，包裹mutation，使之可以异步</span>
    <span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//从基本数据派生出来的数据（类似于计算属性）</span>
    <span class="token literal-property property">modules</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 模块化Vuex</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//3.导出store对象</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>例子：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">countPlus</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">increment</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>count <span class="token operator">+=</span> payload
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'.app'</span><span class="token punctuation">,</span>
    store<span class="token punctuation">,</span>
    <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">count</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">increment</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;div&gt;
            {{ count }}
            &lt;button @click='increment'&gt;点我&lt;/button&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p><strong>总结</strong>：</p> <p>Vuex实现了一个单向数据流，在全局拥有一个State存放数据，当组件要更改State中的数据时，必须通过Mutation 提交修改信息，Mutation同时提供了订阅者模式供外部插件调用获取 State数据的更新。而当所有异步操作（常见与调用后端接口异步获取更新数据）或批量的同步操作需要走Action，但Action也是无法直接修改State的，还是需要通过Mutation 来修改State的数据，最后，根据State的变化，渲染到视图上。</p> <h2 id="_2-vuex中action-和-mutation-的区别"><a href="#_2-vuex中action-和-mutation-的区别" class="header-anchor">#</a> 2. Vuex中action 和 mutation 的区别</h2> <p><code>mutation</code>中的操作是一系列的<strong>同步</strong>函数，用于修改state中的变量的状态。当使用Vuex时需要通过commit来提交需要操作的内容。mutation非常类似于事件：每个mutation都有一个字符串的 事件类型（type）和一个 回调函数（handler）。这个回调函数就是实际进行状态更改的地方，并且它会接收state作为第一个参数：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>count<span class="token operator">++</span>  <span class="token comment">//变更状态</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>当触发一个类型为increment的mutation时，需要调用此函数：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>而Action类似于mutation，不同点在于：</p> <ul><li>Action 可以包含任意异步操作</li> <li>Action提交的是mutation，而不是直接变更状态</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">conut</span><span class="token operator">:</span><span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>count<span class="token operator">++</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Action 函数接受一个与store实例具有相同方法和属性的context对象，因此可以调用 context.commit提交一个 mutation，或者通过 context.state 和 context.getters来获取 state 和getters。</p> <p><strong>所以，两者的不同点如下</strong>：</p> <ul><li>Mutation 专注于修改state，理论上是修改State的唯一途径；Action业务代码、异步请求。</li> <li>Mutation：必须同步执行；Action：可以异步，但不能直接操作State。</li> <li>在视图更新时，先触发Actions，Actions再触发mutation</li> <li>mutation的参数是state，它包含store中的数据；Action的参数是context，它是state的父级，包含state、getters</li></ul> <h2 id="_3-为什么vuex-的-mutation中不能做异步操作"><a href="#_3-为什么vuex-的-mutation中不能做异步操作" class="header-anchor">#</a> 3. 为什么Vuex 的 mutation中不能做异步操作？</h2> <ul><li>vuex中所有的状态更新的唯一途径都是mutation，异步操作通过Action 来提交mutation实现，这样可以<strong>方便地跟踪每一个状态的变化</strong>，从而能够实现一些工具帮助更好地了解我们的应用。</li> <li>每个mutation执行完成后都会对应到一个新的状态变更，这样devtools就可以打个快照存下来，然后就可以实现time-travel了。<strong>如果mutation支持异步操作，就没有办法知道状态是何时更新的，无法很好的进行状态的追踪，给调试带来困难</strong>。（调试困难）</li></ul> <h1 id="八、vue3-0"><a href="#八、vue3-0" class="header-anchor">#</a> 八、Vue3.0</h1> <h2 id="_1-vue3-0-有什么更新"><a href="#_1-vue3-0-有什么更新" class="header-anchor">#</a> 1. Vue3.0 有什么更新</h2> <p><strong>（1）监测机制的变化</strong></p> <ul><li>3.0将带来基于proxy的observer实现，提供全语言覆盖的反应性跟踪</li> <li>消除了Vue2 中基于object.defineProperty的实现所存在的很多限制。</li></ul> <p><strong>（2）只能监测属性，不能检测对象</strong></p> <ul><li>检测属性的添加和删除</li> <li>检测数组索引和长度的变更</li> <li>支持Map、Set、WeakSet 和 WeakMap</li></ul> <p><strong>（3）模板</strong></p> <ul><li>作用域插槽，2.x的机制导致作用域插槽变了，父组件会重新渲染，而3.0把作用域插槽改成了函数的方式，这样只会影响子组件的重新渲染，提升了渲染的性能。</li> <li>同时，对于render函数的方面，vue3.0也会进行一系列更改来方便习惯直接使用api来生成vdom</li></ul> <p><strong>（4）对象式的组件声明方式</strong></p> <ul><li>vue2 中的组件是通过声明的方式传入一系列option，和typescript的结合需要通过一些装饰器的方式来做，虽然能实现功能，但是比较麻烦</li> <li>3.0 修改了组件的声明方式，改成了类式的写法，这样使得和typescript的结合变得很容易</li></ul> <p><strong>（5）其他方面的更改</strong></p> <ul><li>支持自定义渲染器，从而使得weex可以通过自定义渲染器的方式来扩展，而不是直接fork源码来改的方式</li> <li>支持Fragment（多个根节点）和Protal（在dom其他部分渲染组件内容）组件，针对一些特殊的场景做了处理。</li> <li>基于tree shaking优化，提供了更对的内置功能。</li></ul> <h1 id="九、虚拟dom"><a href="#九、虚拟dom" class="header-anchor">#</a> 九、虚拟DOM</h1> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>虚拟DOM，Virtual DOM，这个概念对我们而言其实是不陌生的，在目前主流的三大框架中，都有涉及到使用虚拟DOM，接下来看看在Vue中的虚拟DOM的存在和实现。</p> <h2 id="_1-什么是虚拟dom"><a href="#_1-什么是虚拟dom" class="header-anchor">#</a> 1. 什么是虚拟DOM？</h2> <p>首先，虚拟DOM的本质还是JS对象。通常把组合成一个DOM节点的必要东西通过Js对象表示出来，那么这个JS对象就可以用来描述这个DOM节点，我们把这个Js对象就称为是这个真是DOM节点的虚拟DOM节点。</p> <h2 id="_2-为什么要有虚拟dom"><a href="#_2-为什么要有虚拟dom" class="header-anchor">#</a> 2. 为什么要有虚拟DOM？</h2> <p>Vue是数据驱动视图，也就是说，数据发生变化，视图也就要随之发生更新，在更新的时候难免还是要操作DOM的，但是如果操作真实DOM还是非常复杂的，在每一个真实的DOM节点下的属性是非常多的，直接操作真实DOM是非常消耗性能的一件事，所以虚拟DOM应运而生。</p> <p>来看一下他们重排重绘的性能消耗：</p> <ul><li>真实DOM：生成HTML字符串+重建所有的DOM元素</li> <li>虚拟DOM：生成VNode + DOMDiff + 必要的dom更新</li></ul> <h2 id="_3-dom-diff算法"><a href="#_3-dom-diff算法" class="header-anchor">#</a> 3. DOM-Diff算法</h2> <p>Vnode最大的用途就是在数据变化前后生成真实DOM对应的虚拟DOM节点，然后就可以对比新旧两份VNode，找出差异所在，然后更新有差异的DOM节点，最终达到以最少操作真实DOM更新视图的目的。</p> <p><strong>对比新旧两份VNode并找出差异的过程就是所谓的DOM-Diff过程</strong>。</p> <h3 id="patch"><a href="#patch" class="header-anchor">#</a> patch</h3> <p>在 Vue 中，把 <code>DOM-Diff</code>过程叫做 <code>Patch</code>过程。patch意为 “补丁”，即指对旧的 <code>VNode</code>修补，打补丁从而得到新的 <code>VNode</code>。</p> <p><strong>核心思想</strong>：</p> <ul><li><p>所谓旧的 <code>VNode</code>（即 <code>oldNode</code>）就是数据变化之前视图所对应的虚拟DOM节点，而新的<code>VNode</code>是数据变化之后将要渲染的新的视图所对应的虚拟 <code>DOM</code>节点。</p></li> <li><p>所以我们要以生成的新的 <code>VNode</code>为基准，对比旧的 <code>oldNode</code>。</p></li> <li><p>如果新的 <code>VNode</code>上有的节点而旧的 <code>oldNode</code>上没有，那么就在旧的 <code>oldNode</code>上加上去；（<strong>添加</strong>）</p></li> <li><p>如果新的 <code>VNode</code>上没有的节点而旧的 <code>oldNode</code>上有，那么就在旧的 <code>oldNode</code>上去掉（<strong>删除</strong>）</p></li> <li><p>如果某些节点在新旧上都有，那么就以新的 <code>VNode</code>为准，更新旧的 <code>oldNode</code>，从而让新旧节点相同（<strong>覆盖</strong>）</p></li></ul> <p><strong>以新的VNode为基准，改造旧的oldNode使之成为跟新的VNode一样，这就是patch过程要干的事。</strong></p> <h2 id="_4-vue中key的作用"><a href="#_4-vue中key的作用" class="header-anchor">#</a> 4. Vue中key的作用</h2> <p>vue中key值的作用可以分为两种情况来考虑：</p> <ul><li>第一种情况是 v-if 中使用key。由于Vue会尽可能高效的渲染元素，通常会复用已有元素而不是从头开始渲染。因此当使用 <code>v-if</code>来实现元素切换时，如果切换前后含有相同类型的元素，那么这个元素就会被复用。如果是相同的input元素，那么切换前后用户的输入不会被清除，这样是不符合需求的。因此可以通过使用key来唯一的标识一个元素，这个情况下，使用key的元素不会被复用。<strong>这个时候key的作用是用来标识一个独立的元素</strong>。</li> <li>第二种情况是 <code>v-for</code>中使用key。用 v-for 更新已渲染过的元素列表时，它默认使用“就地复用”的策略。如果数据项的顺序发生了改变，Vue不会移动DOM元素来匹配数据项的顺序，而是简单复用此处的每个元素。因此通过为每个列表提高一个key值，来以便Vue跟踪元素的身份，从而高效的实现复用。<strong>这个时候key的作用是为了高效的更新渲染虚拟DOM</strong>。</li></ul> <p><strong>key是VNode的唯一id，依靠key，我们的diff操作可以更加准确，更加快速。diff算法的过程中，先会进行新旧节点的首尾交叉对比，当无法匹配的时候会用新节点的key和旧节点的key进行对比，从而找到相应的旧节点。</strong></p> <h3 id="为什么不建议index作为key"><a href="#为什么不建议index作为key" class="header-anchor">#</a> 为什么不建议index作为key？</h3> <p>使用index作为key和没写基本上没有去区别，因为不管数组的顺序怎么颠倒，index都是0,1,2...这样排列，导致Vue会复用错误的旧子节点，做很多额外的工作。</p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/mynote/docs/note/ThreeJs/ThreeJs.html" class="prev">
            ThreeJs
          </a></span> <span class="next"><a href="/mynote/docs/note/Vue/keep-alive.html">
            Keep-alive
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_1-data为什么是一个函数而不是对象" class="sidebar-link reco-side-_1-data为什么是一个函数而不是对象" data-v-70334359>1. data为什么是一个函数而不是对象？</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_2-为什么vue3-0使用proxy-抛弃了object-defineproperty" class="sidebar-link reco-side-_2-为什么vue3-0使用proxy-抛弃了object-defineproperty" data-v-70334359>2. 为什么vue3.0使用proxy，抛弃了object.defineProperty?</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_3-对ssr的理解" class="sidebar-link reco-side-_3-对ssr的理解" data-v-70334359>3. 对SSR的理解</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_4-vue如何监听对象或者数组某个属性的变化" class="sidebar-link reco-side-_4-vue如何监听对象或者数组某个属性的变化" data-v-70334359>4. Vue如何监听对象或者数组某个属性的变化</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_5-什么是mixin" class="sidebar-link reco-side-_5-什么是mixin" data-v-70334359>5. 什么是mixin？</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_6-对vue组件化的理解" class="sidebar-link reco-side-_6-对vue组件化的理解" data-v-70334359>6. 对vue组件化的理解</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_7-vue的性能优化有哪些" class="sidebar-link reco-side-_7-vue的性能优化有哪些" data-v-70334359>7. Vue的性能优化有哪些？</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_8-v-model的实现原理" class="sidebar-link reco-side-_8-v-model的实现原理" data-v-70334359>8. v-model的实现原理</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_9、常见的事件修饰符及其作用" class="sidebar-link reco-side-_9、常见的事件修饰符及其作用" data-v-70334359>9、常见的事件修饰符及其作用</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_10、vue单页面应用与多页面应用的区别" class="sidebar-link reco-side-_10、vue单页面应用与多页面应用的区别" data-v-70334359>10、Vue单页面应用与多页面应用的区别</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_11、vue是如何收集依赖的" class="sidebar-link reco-side-_11、vue是如何收集依赖的" data-v-70334359>11、Vue是如何收集依赖的？</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_12、vue的优点" class="sidebar-link reco-side-_12、vue的优点" data-v-70334359>12、Vue的优点</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_13、assets-和-static的区别" class="sidebar-link reco-side-_13、assets-和-static的区别" data-v-70334359>13、assets 和 static的区别</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_14、delete-和-vue-delete删除数组的区别" class="sidebar-link reco-side-_14、delete-和-vue-delete删除数组的区别" data-v-70334359>14、delete 和 Vue.delete删除数组的区别</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_15、extend有什么作用" class="sidebar-link reco-side-_15、extend有什么作用" data-v-70334359>15、extend有什么作用</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_16、mixin-和-mixins-区别" class="sidebar-link reco-side-_16、mixin-和-mixins-区别" data-v-70334359>16、mixin 和 mixins 区别</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_17、mvvm的优缺点" class="sidebar-link reco-side-_17、mvvm的优缺点" data-v-70334359>17、MVVM的优缺点？</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_1-v-if、v-show、v-html的原理" class="sidebar-link reco-side-_1-v-if、v-show、v-html的原理" data-v-70334359>1. v-if、v-show、v-html的原理</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_2-vue的基本原理" class="sidebar-link reco-side-_2-vue的基本原理" data-v-70334359>2. vue的基本原理</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_3-双向数据绑定原理" class="sidebar-link reco-side-_3-双向数据绑定原理" data-v-70334359>3. 双向数据绑定原理</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_4-nexttick原理及作用" class="sidebar-link reco-side-_4-nexttick原理及作用" data-v-70334359>4. $nextTick原理及作用</a></li><li class="level-3" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#原理" class="sidebar-link reco-side-原理" data-v-70334359>原理</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_5-vue2-x里的-object-defineproperty" class="sidebar-link reco-side-_5-vue2-x里的-object-defineproperty" data-v-70334359>5. Vue2.x里的 object.defineProperty()</a></li><li class="level-3" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#关于getter-和-setter机制" class="sidebar-link reco-side-关于getter-和-setter机制" data-v-70334359>关于getter 和 setter机制</a></li><li class="level-3" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#关于数据劫持" class="sidebar-link reco-side-关于数据劫持" data-v-70334359>关于数据劫持</a></li><li class="level-3" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#怎样使用object-defineproperty操作数组" class="sidebar-link reco-side-怎样使用object-defineproperty操作数组" data-v-70334359>怎样使用Object.defineProperty操作数组？</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_6-vue3-0-里的proxy" class="sidebar-link reco-side-_6-vue3-0-里的proxy" data-v-70334359>6. Vue3.0 里的Proxy</a></li><li class="level-3" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#可以直接修改对象" class="sidebar-link reco-side-可以直接修改对象" data-v-70334359>可以直接修改对象</a></li><li class="level-3" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#可以直接修改数组" class="sidebar-link reco-side-可以直接修改数组" data-v-70334359>可以直接修改数组</a></li><li class="level-3" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#直接修改函数" class="sidebar-link reco-side-直接修改函数" data-v-70334359>直接修改函数</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_7-模板编译原理" class="sidebar-link reco-side-_7-模板编译原理" data-v-70334359>7. 模板编译原理</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_1-mvvm、mvc、mvp的区别" class="sidebar-link reco-side-_1-mvvm、mvc、mvp的区别" data-v-70334359>1. MVVM、MVC、MVP的区别</a></li><li class="level-3" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#mvc" class="sidebar-link reco-side-mvc" data-v-70334359>MVC</a></li><li class="level-3" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#mvvm-vue使用" class="sidebar-link reco-side-mvvm-vue使用" data-v-70334359>MVVM（Vue使用）</a></li><li class="level-3" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#mvp" class="sidebar-link reco-side-mvp" data-v-70334359>MVP</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_2-v-if-和-v-show的区别" class="sidebar-link reco-side-_2-v-if-和-v-show的区别" data-v-70334359>2. v-if 和 v-show的区别</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_3-computed和watch的区别" class="sidebar-link reco-side-_3-computed和watch的区别" data-v-70334359>3. Computed和Watch的区别</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_4-created-和-mounted-的区别" class="sidebar-link reco-side-_4-created-和-mounted-的区别" data-v-70334359>4. created 和 mounted 的区别</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_5-vue-router跳转和location-href有什么区别" class="sidebar-link reco-side-_5-vue-router跳转和location-href有什么区别" data-v-70334359>5. Vue-router跳转和location.href有什么区别</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_6-params-和-query的区别" class="sidebar-link reco-side-_6-params-和-query的区别" data-v-70334359>6. params 和 query的区别</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_7-vuex-和localstorage-的区别" class="sidebar-link reco-side-_7-vuex-和localstorage-的区别" data-v-70334359>7. Vuex 和localStorage 的区别</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_1-说一下vue的生命周期" class="sidebar-link reco-side-_1-说一下vue的生命周期" data-v-70334359>1. 说一下Vue的生命周期</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_2-vue子组件和父组件执行顺序" class="sidebar-link reco-side-_2-vue子组件和父组件执行顺序" data-v-70334359>2. Vue子组件和父组件执行顺序</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_3-一般在哪个生命周期请求异步数据" class="sidebar-link reco-side-_3-一般在哪个生命周期请求异步数据" data-v-70334359>3. 一般在哪个生命周期请求异步数据</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_4-keep-alive中的生命周期有哪些" class="sidebar-link reco-side-_4-keep-alive中的生命周期有哪些" data-v-70334359>4. keep-alive中的生命周期有哪些</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_1-props-emit" class="sidebar-link reco-side-_1-props-emit" data-v-70334359>1. props / $emit</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_2-eventbus事件总线-emit-on" class="sidebar-link reco-side-_2-eventbus事件总线-emit-on" data-v-70334359>2. eventBus事件总线（$emit/$on）</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_3-注入依赖-provide-inject" class="sidebar-link reco-side-_3-注入依赖-provide-inject" data-v-70334359>3. 注入依赖（provide/inject）</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_4-ref-refs" class="sidebar-link reco-side-_4-ref-refs" data-v-70334359>4. ref / $refs</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_5-parent-children" class="sidebar-link reco-side-_5-parent-children" data-v-70334359>5. $parent / $children</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_6-attrs-listeners" class="sidebar-link reco-side-_6-attrs-listeners" data-v-70334359>6. $attrs / $listeners</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#总结" class="sidebar-link reco-side-总结" data-v-70334359>总结</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_1-vue-router的懒加载如何实现" class="sidebar-link reco-side-_1-vue-router的懒加载如何实现" data-v-70334359>1. Vue-Router的懒加载如何实现</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_2-路由的hash-和-history模式的区别" class="sidebar-link reco-side-_2-路由的hash-和-history模式的区别" data-v-70334359>2. 路由的hash 和 history模式的区别</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_3-如何获取页面的hash变化" class="sidebar-link reco-side-_3-如何获取页面的hash变化" data-v-70334359>3. 如何获取页面的hash变化</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_4-route-和-router-的区别" class="sidebar-link reco-side-_4-route-和-router-的区别" data-v-70334359>4. $route 和 $router 的区别</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_5-如何定义动态路由-如何获取传过来的动态参数" class="sidebar-link reco-side-_5-如何定义动态路由-如何获取传过来的动态参数" data-v-70334359>5. 如何定义动态路由？如何获取传过来的动态参数？</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_6-vue-router-导航守卫" class="sidebar-link reco-side-_6-vue-router-导航守卫" data-v-70334359>6. Vue-router 导航守卫</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_7-对前端路由的理解" class="sidebar-link reco-side-_7-对前端路由的理解" data-v-70334359>7. 对前端路由的理解</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_1-vuex的原理" class="sidebar-link reco-side-_1-vuex的原理" data-v-70334359>1. vuex的原理</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_2-vuex中action-和-mutation-的区别" class="sidebar-link reco-side-_2-vuex中action-和-mutation-的区别" data-v-70334359>2. Vuex中action 和 mutation 的区别</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_3-为什么vuex-的-mutation中不能做异步操作" class="sidebar-link reco-side-_3-为什么vuex-的-mutation中不能做异步操作" data-v-70334359>3. 为什么Vuex 的 mutation中不能做异步操作？</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_1-vue3-0-有什么更新" class="sidebar-link reco-side-_1-vue3-0-有什么更新" data-v-70334359>1. Vue3.0 有什么更新</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#前言" class="sidebar-link reco-side-前言" data-v-70334359>前言</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_1-什么是虚拟dom" class="sidebar-link reco-side-_1-什么是虚拟dom" data-v-70334359>1. 什么是虚拟DOM？</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_2-为什么要有虚拟dom" class="sidebar-link reco-side-_2-为什么要有虚拟dom" data-v-70334359>2. 为什么要有虚拟DOM？</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_3-dom-diff算法" class="sidebar-link reco-side-_3-dom-diff算法" data-v-70334359>3. DOM-Diff算法</a></li><li class="level-3" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#patch" class="sidebar-link reco-side-patch" data-v-70334359>patch</a></li><li class="level-2" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#_4-vue中key的作用" class="sidebar-link reco-side-_4-vue中key的作用" data-v-70334359>4. Vue中key的作用</a></li><li class="level-3" data-v-70334359><a href="/mynote/docs/note/Vue/Vue.html#为什么不建议index作为key" class="sidebar-link reco-side-为什么不建议index作为key" data-v-70334359>为什么不建议index作为key？</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/mynote/assets/js/app.7fa68d6d.js" defer></script><script src="/mynote/assets/js/3.50452af2.js" defer></script><script src="/mynote/assets/js/1.6e2e339d.js" defer></script><script src="/mynote/assets/js/35.f2fb6263.js" defer></script>
  </body>
</html>
